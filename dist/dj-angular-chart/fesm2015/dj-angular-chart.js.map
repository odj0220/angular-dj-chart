{"version":3,"file":"dj-angular-chart.js","sources":["../../../projects/dj-angular-chart/src/lib/dj-angular-chart.service.ts","../../../projects/dj-angular-chart/src/lib/base/dc-chart.ts","../../../projects/dj-angular-chart/src/lib/base/base-mixin.ts","../../../projects/dj-angular-chart/src/lib/chart/cloud-chart.ts","../../../projects/dj-angular-chart/src/lib/base/color-mixin.ts","../../../projects/dj-angular-chart/src/lib/base/margin-mixin.ts","../../../projects/dj-angular-chart/src/lib/base/coordinate-grid-mixin.ts","../../../projects/dj-angular-chart/src/lib/chart/multi-chart.ts","../../../projects/dj-angular-chart/src/lib/chart/dj-chart.ts","../../../projects/dj-angular-chart/src/lib/dj-angular-chart.component.ts","../../../projects/dj-angular-chart/src/lib/dj-angular-chart.module.ts","../../../projects/dj-angular-chart/src/lib/class/axis-option.ts","../../../projects/dj-angular-chart/src/lib/class/dj-chart-option.ts","../../../projects/dj-angular-chart/src/public-api.ts","../../../projects/dj-angular-chart/src/dj-angular-chart.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DjAngularChartService {\n\n  constructor() { }\n}\n","import * as dc from 'dc';\n\nexport class DcChart {\n\n  constructor() {\n    Object.keys(dc).forEach(key => {\n      // @ts-ignore\n      this[key] = dc[key];\n    });\n  }\n}\n","import {select} from 'd3-selection';\nimport {dispatch} from 'd3-dispatch';\n\nimport {pluck, utils, instanceOfChart, deregisterChart, redrawAll, registerChart, renderAll, events, logger, printers} from 'dc';\nimport {ElementRef} from '@angular/core';\n\nclass InvalidStateException extends Error {}\nclass BadArgumentException extends Error {}\n\nconst constants = {\n  CHART_CLASS: 'dc-chart',\n  DEBUG_GROUP_CLASS: 'debug',\n  STACK_CLASS: 'stack',\n  DESELECTED_CLASS: 'deselected',\n  SELECTED_CLASS: 'selected',\n  NODE_INDEX_NAME: '__index__',\n  GROUP_INDEX_NAME: '__group_index__',\n  DEFAULT_CHART_GROUP: '__default_chart_group__',\n  EVENT_DELAY: 40,\n  NEGLIGIBLE_NUMBER: 1e-10\n};\n\n\nconst _defaultFilterHandler = (dimension: any, filters: Array<any>) => {\n  if (filters.length === 0) {\n    dimension.filter(null);\n  } else if (filters.length === 1 && !filters[0].isFiltered) {\n    // single value and not a function-based filter\n    dimension.filterExact(filters[0]);\n  } else if (filters.length === 1 && filters[0].filterType === 'RangedFilter') {\n    // single range-based filter\n    dimension.filterRange(filters[0]);\n  } else {\n    dimension.filterFunction( (d: any) => {\n      for (let i = 0; i < filters.length; i++) {\n        const filter = filters[i];\n        if (filter.isFiltered) {\n          if (filter.isFiltered(d)) {\n            return true;\n          }\n        } else if (filter <= d && filter >= d) {\n          return true;\n        }\n      }\n      return false;\n    });\n  }\n  return filters;\n};\n\nconst _defaultHasFilterHandler = (filters: Array<any>, filter: any) => {\n  if (filter === null || typeof (filter) === 'undefined') {\n    return filters.length > 0;\n  }\n  return filters.some(f => filter <= f && filter >= f);\n};\n\nconst _defaultRemoveFilterHandler = (filters: Array<any>, filter: any) => {\n  for (let i = 0; i < filters.length; i++) {\n    if (filters[i] <= filter && filters[i] >= filter) {\n      filters.splice(i, 1);\n      break;\n    }\n  }\n  return filters;\n};\n\nconst _defaultAddFilterHandler = (filters: Array<any>, filter: any) => {\n  filters.push(filter);\n  return filters;\n};\n\nconst _defaultResetFilterHandler = (filters: Array<any>) => [];\n\nexport class BaseMixin {\n  __dcFlag__;\n  _dimension: undefined;\n  _group: undefined;\n  _groupName: any;\n  _anchor: string | undefined;\n  // @ts-ignore\n  _root;\n  // @ts-ignore\n  _svg;\n  _isChild: boolean | undefined;\n  _minWidth;\n  // @ts-ignore\n  _defaultWidthCalc;\n  _widthCalc;\n  _minHeight;\n  // @ts-ignore\n  _defaultHeightCalc;\n  _heightCalc;\n  _width: any;\n  _height: any;\n  _useViewBoxResizing;\n  _keyAccessor;\n  _valueAccessor;\n  _label;\n  _ordering;\n  _renderLabel;\n  // @ts-ignore\n  _title;\n  _renderTitle: any;\n  _controlsUseVisibility;\n  _transitionDuration;\n  _transitionDelay;\n  _filterPrinter;\n  // @ts-ignore\n  _mandatoryAttributesList;\n  _chartGroup;\n  // @ts-ignore\n  _listeners;\n\n  // @ts-ignore\n  _legend;\n  // @ts-ignore\n  _commitHandler;\n\n  // @ts-ignore\n  _defaultData;\n  _data;\n\n  _filters: any[];\n\n  _filterHandler = _defaultFilterHandler;\n  _hasFilterHandler = _defaultHasFilterHandler;\n  _removeFilterHandler = _defaultRemoveFilterHandler;\n  _addFilterHandler = _defaultAddFilterHandler;\n  _resetFilterHandler = _defaultResetFilterHandler;\n\n  constructor () {\n    this.__dcFlag__ = utils.uniqueId();\n\n    this._dimension = undefined;\n    this._group = undefined;\n\n    this._anchor = undefined;\n    this._root = undefined;\n    this._svg = undefined;\n    this._isChild = undefined;\n\n    this._minWidth = 100;\n    this._defaultWidthCalc = (element: Element) => {\n      const width = element && element.getBoundingClientRect && element.getBoundingClientRect().width;\n      return (width && width > this._minWidth) ? width : this._minWidth;\n    };\n    this._widthCalc = this._defaultWidthCalc;\n\n    this._minHeight = 100;\n    this._defaultHeightCalc = (element: Element) => {\n      const height = element && element.getBoundingClientRect && element.getBoundingClientRect().height;\n      return (height && height > this._minHeight) ? height : this._minHeight;\n    };\n    this._heightCalc = this._defaultHeightCalc;\n    this._useViewBoxResizing = false;\n\n    this._keyAccessor = pluck('key');\n    this._valueAccessor = pluck('value');\n    this._label = pluck('key');\n\n    this._ordering = pluck('key');\n\n    this._renderLabel = false;\n\n    // @ts-ignore\n    this._title = d => `${this.keyAccessor()(d)}: ${this.valueAccessor()(d)}`;\n    this._renderTitle = true;\n    this._controlsUseVisibility = false;\n\n    this._transitionDuration = 750;\n\n    this._transitionDelay = 0;\n\n    this._filterPrinter = printers.filters;\n\n    this._mandatoryAttributesList = ['dimension', 'group'];\n\n    this._chartGroup = constants.DEFAULT_CHART_GROUP;\n\n    this._listeners = dispatch(\n      'preRender',\n      'postRender',\n      'preRedraw',\n      'postRedraw',\n      'filtered',\n      'zoomed',\n      'renderlet',\n      'pretransition');\n\n    this._legend = undefined;\n    this._commitHandler = undefined;\n\n    this._defaultData = (group: any) => group.all();\n    this._data = this._defaultData;\n\n    this._filters = [];\n  }\n\n  height (height?: any) {\n    if (height === undefined) {\n      if (!utils.isNumber(this._height)) {\n        // only calculate once\n        this._height = this._heightCalc(this._root.node());\n      }\n      return this._height;\n    }\n    this._heightCalc = height ? (typeof height === 'function' ? height : utils.constant(height)) : this._defaultHeightCalc;\n    this._height = undefined;\n    return this;\n  }\n\n  width (width?: any) {\n    if (width === undefined) {\n      if (!utils.isNumber(this._width)) {\n        // only calculate once\n        this._width = this._widthCalc(this._root.node());\n      }\n      return this._width;\n    }\n    this._widthCalc = width ? (typeof width === 'function' ? width : utils.constant(width)) : this._defaultWidthCalc;\n    this._width = undefined;\n    return this;\n  }\n\n  minWidth (minWidth?: any) {\n    if (minWidth === undefined) {\n      return this._minWidth;\n    }\n    this._minWidth = minWidth;\n    return this;\n  }\n\n  minHeight (minHeight?: any) {\n    if (minHeight === undefined) {\n      return this._minHeight;\n    }\n    this._minHeight = minHeight;\n    return this;\n  }\n\n  useViewBoxResizing (useViewBoxResizing?: any) {\n    if (useViewBoxResizing === undefined) {\n      return this._useViewBoxResizing;\n    }\n    this._useViewBoxResizing = useViewBoxResizing;\n    return this;\n  }\n\n  dimension (dimension?: any) {\n    if (dimension === undefined) {\n      return this._dimension;\n    }\n    this._dimension = dimension;\n    this.expireCache();\n    return this;\n  }\n\n  data (callback?: any) {\n    if (callback === undefined) {\n      return this._data(this._group);\n    }\n    this._data = typeof callback === 'function' ? callback : utils.constant(callback);\n    this.expireCache();\n    return this;\n  }\n\n  group (group?: any, name?: string) {\n    if (group === undefined) {\n      return this._group;\n    }\n    this._group = group;\n    this._groupName = name;\n    this.expireCache();\n    return this;\n  }\n\n  ordering (orderFunction?: any) {\n    if (orderFunction === undefined) {\n      return this._ordering;\n    }\n    this._ordering = orderFunction;\n    this.expireCache();\n    return this;\n  }\n\n  _computeOrderedGroups (data: any) {\n    // clone the array before sorting, otherwise Array.sort sorts in-place\n    return Array.from(data).sort((a, b) => this._ordering(a) - this._ordering(b));\n  }\n\n  filterAll () {\n    return this.filter(null);\n  }\n\n  select (sel: any) {\n    return this._root.select(sel);\n  }\n\n  selectAll (sel: any) {\n    return this._root ? this._root.selectAll(sel) : null;\n  }\n\n  anchor (parent?: any, chartGroup?: any) {\n    if (parent === undefined) {\n      return this._anchor;\n    }\n    if (instanceOfChart(parent)) {\n      this._anchor = parent.anchor();\n      // @ts-ignore\n      if (this._anchor.children) { // is _anchor a div?\n        this._anchor = `#${parent.anchorName()}`;\n      }\n      this._root = parent.root();\n      this._isChild = true;\n    } else if (parent) {\n      if (parent.select && parent.classed) { // detect d3 selection\n        this._anchor = parent.node();\n      } else {\n        this._anchor = parent;\n      }\n      // @ts-ignore\n      this._root = select(this._anchor);\n      this._root.classed(constants.CHART_CLASS, true);\n      // @ts-ignore\n      registerChart(this, chartGroup);\n      this._isChild = false;\n    } else {\n      throw new BadArgumentException('parent must be defined');\n    }\n    this._chartGroup = chartGroup;\n    return this;\n  }\n\n  anchorName () {\n    const a: any = this.anchor();\n    if (a && a.id) {\n      return a.id;\n    }\n    if (a && a.replace) {\n      return a.replace('#', '');\n    }\n    return `dc-chart${this.chartID()}`;\n  }\n\n  root (rootElement?: any) {\n    if (rootElement === undefined) {\n      return this._root;\n    }\n    this._root = rootElement;\n    return this;\n  }\n\n  svg (svgElement?: any) {\n    if (svgElement === undefined) {\n      return this._svg;\n    }\n    this._svg = svgElement;\n    return this;\n  }\n\n  resetSvg () {\n    this.select('svg').remove();\n    return this.generateSvg();\n  }\n\n  sizeSvg () {\n    if (this._svg) {\n      if (!this._useViewBoxResizing) {\n        this._svg\n          .attr('width', this.width())\n          .attr('height', this.height());\n      } else if (!this._svg.attr('viewBox')) {\n        this._svg\n          .attr('viewBox', `0 0 ${this.width()} ${this.height()}`);\n      }\n    }\n  }\n\n  generateSvg () {\n    this._svg = this.root().append('svg');\n    this.sizeSvg();\n    return this._svg;\n  }\n\n  filterPrinter (filterPrinterFunction?: any) {\n    if (filterPrinterFunction === undefined) {\n      return this._filterPrinter;\n    }\n    this._filterPrinter = filterPrinterFunction;\n    return this;\n  }\n\n  controlsUseVisibility (controlsUseVisibility?: any) {\n    if (controlsUseVisibility === undefined) {\n      return this._controlsUseVisibility;\n    }\n    this._controlsUseVisibility = controlsUseVisibility;\n    return this;\n  }\n\n  turnOnControls () {\n    if (this._root) {\n      const attribute = this.controlsUseVisibility() ? 'visibility' : 'display';\n      this.selectAll('.reset').style(attribute, null);\n      this.selectAll('.filter').text(this._filterPrinter(this.filters())).style(attribute, null);\n    }\n    return this;\n  }\n\n  turnOffControls () {\n    if (this._root) {\n      const attribute = this.controlsUseVisibility() ? 'visibility' : 'display';\n      const value = this.controlsUseVisibility() ? 'hidden' : 'none';\n      this.selectAll('.reset').style(attribute, value);\n      this.selectAll('.filter').style(attribute, value).text(this.filter());\n    }\n    return this;\n  }\n\n\n  transitionDuration (duration?: any) {\n    if (duration === undefined) {\n      return this._transitionDuration;\n    }\n    this._transitionDuration = duration;\n    return this;\n  }\n\n\n  transitionDelay (delay?: any) {\n    if (delay === undefined) {\n      return this._transitionDelay;\n    }\n    this._transitionDelay = delay;\n    return this;\n  }\n\n  _mandatoryAttributes (_?: any) {\n    if (_ === undefined) {\n      return this._mandatoryAttributesList;\n    }\n    this._mandatoryAttributesList = _;\n    return this;\n  }\n\n  checkForMandatoryAttributes (a: string) {\n    // @ts-ignore\n    if (!this[a] || !this[a]()) {\n      throw new InvalidStateException(`Mandatory attribute chart.${a} is missing on chart[#${this.anchorName()}]`);\n    }\n  }\n\n\n  render() {\n    this._height = this._width = undefined; // force recalculate\n    this._listeners.call('preRender', this, this);\n\n    if (this._mandatoryAttributesList) {\n      this._mandatoryAttributesList.forEach((e: any) => this.checkForMandatoryAttributes(e));\n    }\n\n    const result = this._doRender();\n\n    if (this._legend) {\n      this._legend.render();\n    }\n\n    this._activateRenderlets('postRender');\n\n    return result;\n  }\n\n  _activateRenderlets (event: any) {\n    this._listeners.call('pretransition', this, this);\n    if (this.transitionDuration() > 0 && this._svg) {\n      this._svg.transition().duration(this.transitionDuration()).delay(this.transitionDelay())\n        .on('end', () => {\n          this._listeners.call('renderlet', this, this);\n          if (event) {\n            this._listeners.call(event, this, this);\n          }\n        });\n    } else {\n      this._listeners.call('renderlet', this, this);\n      if (event) {\n        this._listeners.call(event, this, this);\n      }\n    }\n  }\n\n\n  redraw () {\n    this.sizeSvg();\n    this._listeners.call('preRedraw', this, this);\n\n    const result = this._doRedraw();\n\n    if (this._legend) {\n      this._legend.render();\n    }\n\n    this._activateRenderlets('postRedraw');\n\n    return result;\n  }\n\n\n  commitHandler (commitHandler?: any) {\n    if (commitHandler === undefined) {\n      return this._commitHandler;\n    }\n    this._commitHandler = commitHandler;\n    return this;\n  }\n\n  redrawGroup () {\n    if (this._commitHandler) {\n      this._commitHandler(false, (error: any, result: any) => {\n        if (error) {\n          console.log(error);\n        } else {\n          // @ts-ignore\n          redrawAll(this.chartGroup());\n        }\n      });\n    } else {\n      // @ts-ignore\n      redrawAll(this.chartGroup());\n    }\n    return this;\n  }\n\n  renderGroup () {\n    if (this._commitHandler) {\n      this._commitHandler(false, (error: any, result: any) => {\n        if (error) {\n          console.log(error);\n        } else {\n          // @ts-ignore\n          renderAll(this.chartGroup());\n        }\n      });\n    } else {\n      // @ts-ignore\n      renderAll(this.chartGroup());\n    }\n    return this;\n  }\n\n  _invokeFilteredListener (f: any) {\n    if (f !== undefined) {\n      this._listeners.call('filtered', this, this, f);\n    }\n  }\n\n  _invokeZoomedListener () {\n    this._listeners.call('zoomed', this, this);\n  }\n\n\n  hasFilterHandler (hasFilterHandler?: any) {\n    if (hasFilterHandler === undefined) {\n      return this._hasFilterHandler;\n    }\n    this._hasFilterHandler = hasFilterHandler;\n    return this;\n  }\n\n  hasFilter (filter?: any) {\n    return this._hasFilterHandler(this._filters, filter);\n  }\n\n\n  removeFilterHandler (removeFilterHandler?: any) {\n    if (removeFilterHandler === undefined) {\n      return this._removeFilterHandler;\n    }\n    this._removeFilterHandler = removeFilterHandler;\n    return this;\n  }\n\n  addFilterHandler (addFilterHandler: any) {\n    if (!arguments.length) {\n      return this._addFilterHandler;\n    }\n    this._addFilterHandler = addFilterHandler;\n    return this;\n  }\n\n\n  resetFilterHandler (resetFilterHandler: any) {\n    if (!arguments.length) {\n      return this._resetFilterHandler;\n    }\n    this._resetFilterHandler = resetFilterHandler;\n    return this;\n  }\n\n  applyFilters (filters: any) {\n    // @ts-ignore\n    if (this.dimension() && this.dimension().filter) {\n      const fs = this._filterHandler(this.dimension(), filters);\n      if (fs) {\n        filters = fs;\n      }\n    }\n    return filters;\n  }\n\n  replaceFilter (filter: any) {\n    this._filters = this._resetFilterHandler(this._filters);\n    this.filter(filter);\n    return this;\n  }\n\n  filter (filter?: any) {\n    if (filter === undefined) {\n      return this._filters.length > 0 ? this._filters[0] : null;\n    }\n    let filters = this._filters;\n    // @ts-ignore\n    if (filter instanceof Array && filter[0] instanceof Array && !filter['isFiltered']) {\n      // toggle each filter\n      filter[0].forEach(f => {\n        if (this._hasFilterHandler(filters, f)) {\n          filters = this._removeFilterHandler(filters, f);\n        } else {\n          filters = this._addFilterHandler(filters, f);\n        }\n      });\n    } else if (filter === null) {\n      filters = this._resetFilterHandler(filters);\n    } else {\n      if (this._hasFilterHandler(filters, filter)) {\n        filters = this._removeFilterHandler(filters, filter);\n      } else {\n        filters = this._addFilterHandler(filters, filter);\n      }\n    }\n    this._filters = this.applyFilters(filters);\n    this._invokeFilteredListener(filter);\n\n    if (this._root !== null && this.hasFilter()) {\n      this.turnOnControls();\n    } else {\n      this.turnOffControls();\n    }\n\n    return this;\n  }\n\n\n  filters () {\n    return this._filters;\n  }\n\n  highlightSelected (e: any) {\n    select(e).classed(constants.SELECTED_CLASS, true);\n    select(e).classed(constants.DESELECTED_CLASS, false);\n  }\n\n  fadeDeselected (e: any) {\n    select(e).classed(constants.SELECTED_CLASS, false);\n    select(e).classed(constants.DESELECTED_CLASS, true);\n  }\n\n  resetHighlight (e: any) {\n    select(e).classed(constants.SELECTED_CLASS, false);\n    select(e).classed(constants.DESELECTED_CLASS, false);\n  }\n\n  onClick (datum?: any, i?: any) {\n    // @ts-ignore\n    const filter = this.keyAccessor()(datum);\n    events.trigger(() => {\n      this.filter(filter);\n      this.redrawGroup();\n    });\n  }\n\n  filterHandler (filterHandler: any) {\n    if (!arguments.length) {\n      return this._filterHandler;\n    }\n    this._filterHandler = filterHandler;\n    return this;\n  }\n\n  // abstract function stub\n  _doRender () {\n    // do nothing in base, should be overridden by sub-function\n    return this;\n  }\n\n  _doRedraw () {\n    // do nothing in base, should be overridden by sub-function\n    return this;\n  }\n\n  legendables () {\n    // do nothing in base, should be overridden by sub-function\n    return [];\n  }\n\n  legendHighlight () {\n    // do nothing in base, should be overridden by sub-function\n  }\n\n  legendReset () {\n    // do nothing in base, should be overridden by sub-function\n  }\n\n  legendToggle () {\n    // do nothing in base, should be overriden by sub-function\n  }\n\n  isLegendableHidden () {\n    // do nothing in base, should be overridden by sub-function\n    return false;\n  }\n\n  keyAccessor (keyAccessor?: any) {\n    if (keyAccessor === undefined) {\n      return this._keyAccessor;\n    }\n    this._keyAccessor = keyAccessor;\n    return this;\n  }\n\n  valueAccessor (valueAccessor?: any) {\n    if (valueAccessor === undefined) {\n      return this._valueAccessor;\n    }\n    this._valueAccessor = valueAccessor;\n    return this;\n  }\n\n\n  label (labelFunction: any, enableLabels: any) {\n    if (!arguments.length) {\n      return this._label;\n    }\n    this._label = labelFunction;\n    if ((enableLabels === undefined) || enableLabels) {\n      this._renderLabel = true;\n    }\n    return this;\n  }\n\n\n  renderLabel (renderLabel: any) {\n    if (!arguments.length) {\n      return this._renderLabel;\n    }\n    this._renderLabel = renderLabel;\n    return this;\n  }\n\n\n  title (titleFunction: any) {\n    if (!arguments.length) {\n      return this._title;\n    }\n    this._title = titleFunction;\n    return this;\n  }\n\n\n  renderTitle (renderTitle: string) {\n    if (!arguments.length) {\n      return this._renderTitle;\n    }\n    this._renderTitle = renderTitle;\n    return this;\n  }\n\n\n  chartGroup (chartGroup?: any) {\n    if (chartGroup === undefined) {\n      return this._chartGroup;\n    }\n    if (!this._isChild) {\n      // @ts-ignore\n      deregisterChart(this, this._chartGroup);\n    }\n    this._chartGroup = chartGroup;\n    if (!this._isChild) {\n      // @ts-ignore\n      registerChart(this, this._chartGroup);\n    }\n    return this;\n  }\n\n  expireCache () {\n    // do nothing in base, should be overridden by sub-function\n    return this;\n  }\n\n  legend (legend?: any) {\n    if (legend === undefined) {\n      return this._legend;\n    }\n    this._legend = legend;\n    this._legend.parent(this);\n    return this;\n  }\n\n  chartID () {\n    return this.__dcFlag__;\n  }\n\n  options (opts: any) {\n    const applyOptions = [\n      'anchor',\n      'group',\n      'xAxisLabel',\n      'yAxisLabel',\n      'stack',\n      'title',\n      'point',\n      'getColor',\n      'overlayGeoJson'\n    ];\n\n    for (const o in opts) {\n      // @ts-ignore\n      if (typeof (this[o]) === 'function') {\n        if (opts[o] instanceof Array && applyOptions.indexOf(o) !== -1) {\n          // @ts-ignore\n          this[o].apply(this, opts[o]);\n        } else {\n          // @ts-ignore\n          this[o].call(this, opts[o]);\n        }\n      } else {\n        logger.debug(`Not a valid option setter name: ${o}`);\n      }\n    }\n    return this;\n  }\n\n  on(event: any, listener: any) {\n    this._listeners.on(event, listener);\n    return this;\n  }\n\n  renderlet (renderletFunction: any) {\n    logger.warnOnce('chart.renderlet has been deprecated. Please use chart.on(\"renderlet.<renderletKey>\", renderletFunction)');\n    this.on(`renderlet.${utils.uniqueId()}`, renderletFunction);\n    return this;\n  }\n}\n","import * as d3 from 'd3';\nimport * as _d3Cloud from 'd3-cloud';\nimport * as _ from 'lodash';\nimport {BaseMixin} from '../base/base-mixin';\nconst d3Cloud = _d3Cloud;\n\n\nexport class CloudChart extends BaseMixin {\n\n  private _scale = [15, 70];\n  private _color = d3.schemeCategory10;\n  private _customColor: any;\n  private _padding = 2;\n  private _legends: any;\n  private _tooltip: any;\n\n  constructor(private element?: any, private option?: any) {\n    super();\n\n    this._width = 100;\n    this._height = 100;\n  }\n\n  render() {\n    if (this.svg()) {\n      // @ts-ignore\n      this.svg().remove();\n    }\n    this.chartRender();\n    return this;\n  }\n\n  redraw() {\n    this.render();\n    return this;\n  }\n\n  width(width?: number) {\n    if (!width) {\n      this._width = this.option.width ? this.option.width : this.element.clientWidth;\n      return this._width;\n    }\n\n    this._width = width;\n    return this;\n  }\n\n  height(height?: number) {\n    if (!height) {\n      this._height = this.option.height ? this.option.height : this.element.clientHeight;\n      return this._height;\n    }\n    this._height = height;\n    return this;\n  }\n\n  legends(object?: any) {\n    if (!object) {\n      return this._legends;\n    }\n    this._legends = object;\n    return this;\n  }\n\n  padding(padding?: any) {\n    if (!padding) {\n      return this._padding;\n    }\n    this._padding = padding;\n    return this;\n  }\n\n  color(color?: any) {\n    if (!color) {\n      return this._customColor ? this._customColor : this._color;\n    }\n    this._customColor = color;\n    return this;\n  }\n\n  dimension(dimension: any) {\n    if (!dimension) {\n      return this._dimension;\n    }\n    this._dimension = dimension;\n    return this;\n  }\n\n  group(object: any) {\n    if (!object) {\n      return this._group;\n    }\n    this._group = object;\n    return this;\n  }\n\n\n\n  private chartRender() {\n    // @ts-ignore\n    const data = this._group.all();\n    const fontScale = d3.scaleLinear().range(this._scale);\n    const domain = [d3.min(data, (d: any) => d.value), d3.max(data, (d: any) => d.value)];\n    // @ts-ignore\n    fontScale.domain(domain);\n\n    // @ts-ignore\n    d3Cloud()\n      .size([this._width, this._height])\n      .words(data)\n      .padding(this._padding)\n      .rotate(0)\n      .font('sans-serif')\n      .text((d: any) => {\n        let key = d.key || d.keys;\n        key = typeof key === 'string' ? key : key[0];\n        if (this._legends && this._legends[key]) {\n          key = this._legends[key];\n        }\n        return key;\n      })\n      .fontSize((d: any) => fontScale(d.value))\n      .on('end', this.draw.bind(this))\n      .start();\n  }\n\n  svg() {\n    // @ts-ignore\n    if (!d3.select(this.element).select('svg')._groups[0][0]) {\n      return ;\n    }\n    return d3.select(this.element).select('svg');\n  }\n\n  private draw(words: any) {\n    const cloud = d3.select(this.element).append('svg')\n      .attr('class', 'wise-chart-cloud')\n      .attr('width', this._width)\n      .attr('height', this._height)\n      .append('g')\n      .attr('transform', 'translate(' + this._width / 2 + ',' + this._height / 2 + ')')\n      .selectAll('text')\n      .data(words)\n      .enter().append('text')\n      .style('font-size', (d: any) => d.size + 'px')\n      .style('font-family', 'sans-serif')\n      .style('fill', (d: any, i: number) => {\n        return this._customColor ? this._customColor[d.key[0]] : this._color[ i % this._color.length];\n      })\n      .style('opacity', (d: any, i) => {\n        if (this['filters']().length) {\n          const filters = this['filters']().map(dd => dd.toString());\n          if (_.includes(filters, d.key.toString())) {\n            return 1;\n          } else {\n            return .1;\n          }\n        } else {\n          return null;\n        }\n      })\n      .attr('text-anchor', 'middle')\n      .attr('transform', (d: any) => 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')')\n      .text((d: any) => d.text);\n\n    // @ts-ignore\n    cloud.on('click', (d: any, i: number) => {\n      const {key, value} = d;\n      this['onClick']({key, value}, i);\n    });\n\n    if (this.option && this.option.tooltip) {\n      const tooltip = this.getTooltipElem();\n      cloud\n        .on('mouseover', data => {\n          // @ts-ignore\n          const screenX = event.view.innerWidth;\n          // @ts-ignore\n          const screenY = event.view.innerHeight;\n          // @ts-ignore\n          const pageX = event.pageX;\n          // @ts-ignore\n          const pageY = event.pageY;\n          const toolX = tooltip.node().clientWidth;\n          const toolY = tooltip.node().clientHeight;\n          let left = 0, top = 0;\n\n          tooltip.transition()\n            .duration(200)\n            .style('opacity', .9);\n          tooltip.html(this.option.tooltip(data));\n\n          setTimeout(() => {\n            if ((screenX - pageX) < tooltip.node().clientWidth) {\n              left = pageX - toolX - 12;\n              tooltip.classed('right', true);\n              tooltip.classed('left', false);\n            } else {\n              left = pageX + 12;\n              tooltip.classed('right', false);\n              tooltip.classed('left', true);\n            }\n\n            if ((screenY - pageY) < tooltip.node().clientHeight) {\n              top = pageY - toolY + 10;\n              tooltip.classed('bottom', true);\n              tooltip.classed('top', false);\n            } else {\n              top = pageY - 10;\n              tooltip.classed('bottom', false);\n              tooltip.classed('top', true);\n            }\n\n            tooltip\n              .style('top', top + 'px')\n              .style('left', left + 'px');\n          });\n        })\n        .on('mouseout', data => {\n          tooltip .transition()\n            .duration(500)\n            .style('opacity', 0);\n        });\n    }\n  }\n\n\n  private getTooltipElem() {\n    if (!this._tooltip || this._tooltip.empty()) {\n      this._tooltip  = d3.select('body')\n        .append('div')\n        .attr('class', 'wise-chart-tooltip')\n        .html('')\n        .style('opacity', 0)\n        .style('position', 'absolute');\n    }\n    return this._tooltip;\n  }\n\n}\n","import {scaleLinear, scaleOrdinal, scaleQuantize} from 'd3-scale';\nimport {interpolateHcl} from 'd3-interpolate';\nimport {max, min} from 'd3-array';\n\nimport * as dc from 'dc';\nconst config = dc['config'];\nconst utils = dc['utils'];\n\nexport const ColorMixin = (Base: any) => class extends Base {\n  constructor () {\n    super();\n\n    // @ts-ignore\n    this._colors = scaleOrdinal(config.defaultColors());\n\n    this._colorAccessor = (d: any) => this.keyAccessor()(d);\n    this._colorCalculator = undefined;\n\n    {\n      const chart = this;\n      chart.getColor = function (d: any, i: any) {\n        return chart._colorCalculator ?\n          chart._colorCalculator.call(this, d, i) :\n          chart._colors(chart._colorAccessor.call(this, d, i));\n      };\n    }\n  }\n\n  calculateColorDomain () {\n    const newDomain = [min(this.data(), this.colorAccessor()),\n      max(this.data(), this.colorAccessor())];\n    this._colors.domain(newDomain);\n    return this;\n  }\n\n  colors (colorScale: any) {\n    if (!arguments.length) {\n      return this._colors;\n    }\n    if (colorScale instanceof Array) {\n      this._colors = scaleQuantize().range(colorScale); // deprecated legacy support, note: this fails for ordinal domains\n    } else {\n      this._colors = typeof colorScale === 'function' ? colorScale : utils.constant(colorScale);\n    }\n    return this;\n  }\n\n  ordinalColors (r: any) {\n    return this.colors(scaleOrdinal().range(r));\n  }\n\n  linearColors (r: any) {\n    // @ts-ignore\n    const scaleLinear = scaleLinear().range(r);\n    scaleLinear.interpolate(interpolateHcl);\n    const colors = this.colors(scaleLinear);\n    return colors\n  }\n\n  colorAccessor (colorAccessor?: any) {\n    if (!colorAccessor) {\n      return this._colorAccessor;\n    }\n    this._colorAccessor = colorAccessor;\n    return this;\n  }\n\n  colorDomain (domain?: any) {\n    if (!domain) {\n      return this._colors.domain();\n    }\n    this._colors.domain(domain);\n    return this;\n  }\n\n  colorCalculator (colorCalculator?: any) {\n    if (!colorCalculator) {\n      return this._colorCalculator || this.getColor;\n    }\n    this._colorCalculator = colorCalculator;\n    return this;\n  }\n};\n","import {BaseMixin} from './base-mixin';\n\nexport class MarginMixin extends BaseMixin {\n  _margin = {\n    top: 10,\n    right: 50,\n    bottom: 30,\n    left: 30\n  };\n\n  constructor () {\n    super();\n  }\n\n  margins (margins?: any) {\n    if (!margins) {\n      return this._margin;\n    }\n    this._margin = margins;\n    return this;\n  }\n\n  effectiveWidth () {\n    // @ts-ignore\n    return this.width() - this.margins().left - this.margins().right;\n  }\n\n  effectiveHeight () {\n    // @ts-ignore\n    return this.height() - this.margins().top - this.margins().bottom;\n  }\n}\n","import {schemeCategory10} from 'd3-scale-chromatic';\nimport {timeDay} from 'd3-time';\nimport {max, min} from 'd3-array';\nimport {scaleBand, scaleLinear, scaleOrdinal} from 'd3-scale';\nimport {axisBottom, axisLeft, axisRight} from 'd3-axis';\nimport {zoom, zoomIdentity} from 'd3-zoom';\nimport {brushX} from 'd3-brush';\nimport {optionalTransition, units, utils, logger, filters, events, transition} from 'dc';\nimport {ColorMixin} from './color-mixin';\nimport {MarginMixin} from './margin-mixin';\n\nconst GRID_LINE_CLASS = 'grid-line';\nconst HORIZONTAL_CLASS = 'horizontal';\nconst VERTICAL_CLASS = 'vertical';\nconst Y_AXIS_LABEL_CLASS = 'y-axis-label';\nconst X_AXIS_LABEL_CLASS = 'x-axis-label';\nconst CUSTOM_BRUSH_HANDLE_CLASS = 'custom-brush-handle';\nconst DEFAULT_AXIS_LABEL_PADDING = 12;\n\nconst constants = {\n  CHART_CLASS: 'dc-chart',\n  DEBUG_GROUP_CLASS: 'debug',\n  STACK_CLASS: 'stack',\n  DESELECTED_CLASS: 'deselected',\n  SELECTED_CLASS: 'selected',\n  NODE_INDEX_NAME: '__index__',\n  GROUP_INDEX_NAME: '__group_index__',\n  DEFAULT_CHART_GROUP: '__default_chart_group__',\n  EVENT_DELAY: 40,\n  NEGLIGIBLE_NUMBER: 1e-10\n};\n\nexport class CoordinateGridMixin extends ColorMixin(MarginMixin) {\n\n  on: any;\n  svg: any;\n  root: any;\n  data: any;\n  width: any;\n  height: any;\n  redraw: any;\n  colors: any;\n  margins: any;\n  anchorName: any;\n  keyAccessor: any;\n  valueAccessor: any;\n  effectiveWidth: any;\n  effectiveHeight: any;\n  transitionDelay: any;\n  transitionDuration: any;\n  replaceFilter: any;\n  redrawGroup: any;\n  resetSvg: any;\n\n  _invokeZoomedListener: any;\n  _computeOrderedGroups: any;\n  _mandatoryAttributes: any;\n  _parent: any;\n  _g: any;\n  _chartBodyG: any;\n  _x: any;\n  _origX: any;\n  _xOriginalDomain: any;\n  _xAxis: any;\n  _xUnits: any;\n  _xAxisPadding: any;\n  _xAxisPaddingUnit: any;\n  _xElasticity: any;\n  _xAxisLabel: any;\n  _xAxisLabelPadding: any;\n  _lastXDomain: any;\n  _y: any;\n  _yAxis: any;\n  _yAxisPadding: any;\n  _yElasticity: any;\n  _yAxisLabel: any;\n  _yAxisLabelPadding: any;\n  _brush: any;\n  _gBrush: any;\n  _brushOn: any;\n  _parentBrushOn: any;\n  _round: any;\n  _renderHorizontalGridLine: any;\n  _renderVerticalGridLine: any;\n  _resizing: any;\n  _unitCount: any;\n  _zoomScale: any;\n  _zoomOutRestrict: any;\n  _zoom: any;\n  _nullZoom: any;\n  _hasBeenMouseZoomable: any;\n  _rangeChart: any;\n  _focusChart: any;\n  _mouseZoomable: any;\n  _clipPadding: any;\n  _fOuterRangeBandPadding: any;\n  _fRangeBandPadding: any;\n  _useRightYAxis: any;\n\n  constructor () {\n    super();\n\n    this.colors(scaleOrdinal(schemeCategory10));\n    this._mandatoryAttributes().push('x');\n    this._parent = undefined;\n    this._g = undefined;\n    this._chartBodyG = undefined;\n    this._x = undefined;\n    this._origX = undefined; // Will hold original scale in case of zoom\n    this._xOriginalDomain = undefined;\n    // @ts-ignore\n    this._xAxis = axisBottom();\n    this._xUnits = units.integers;\n    this._xAxisPadding = 0;\n    this._xAxisPaddingUnit = timeDay;\n    this._xElasticity = false;\n    this._xAxisLabel = undefined;\n    this._xAxisLabelPadding = 0;\n    this._lastXDomain = undefined;\n    this._y = undefined;\n    this._yAxis = null;\n    this._yAxisPadding = 0;\n    this._yElasticity = false;\n    this._yAxisLabel = undefined;\n    this._yAxisLabelPadding = 0;\n    this._brush = brushX();\n    this._gBrush = undefined;\n    this._brushOn = true;\n    this._parentBrushOn = false;\n    this._round = undefined;\n    this._renderHorizontalGridLine = false;\n    this._renderVerticalGridLine = false;\n    this._resizing = false;\n    this._unitCount = undefined;\n    this._zoomScale = [1, Infinity];\n    this._zoomOutRestrict = true;\n    this._zoom = zoom().on('zoom', () => this._onZoom());\n    this._nullZoom = zoom().on('zoom', null);\n    this._hasBeenMouseZoomable = false;\n    this._rangeChart = undefined;\n    this._focusChart = undefined;\n    this._mouseZoomable = false;\n    this._clipPadding = 0;\n    this._fOuterRangeBandPadding = 0.5;\n    this._fRangeBandPadding = 0;\n    this._useRightYAxis = false;\n  }\n\n  rescale () {\n    this._unitCount = undefined;\n    this._resizing = true;\n    return this;\n  }\n\n  resizing (resizing?: any) {\n    if (resizing === undefined) {\n      return this._resizing;\n    }\n    this._resizing = resizing;\n    return this;\n  }\n\n  rangeChart (rangeChart?: any) {\n    if (rangeChart === undefined) {\n      return this._rangeChart;\n    }\n    this._rangeChart = rangeChart;\n    this._rangeChart.focusChart(this);\n    return this;\n  }\n\n  zoomScale (extent?: any) {\n    if (extent === undefined) {\n      return this._zoomScale;\n    }\n    this._zoomScale = extent;\n    return this;\n  }\n\n  zoomOutRestrict (zoomOutRestrict?: any) {\n    if (zoomOutRestrict === undefined) {\n      return this._zoomOutRestrict;\n    }\n    this._zoomOutRestrict = zoomOutRestrict;\n    return this;\n  }\n\n  _generateG (parent?: any) {\n    if (parent === undefined) {\n      this._parent = this.svg();\n    } else {\n      this._parent = parent;\n    }\n\n    const href = window.location.href.split('#')[0];\n\n    this._g = this._parent.append('g');\n\n    this._chartBodyG = this._g.append('g').attr('class', 'chart-body')\n      .attr('transform', `translate(${this.margins().left}, ${this.margins().top})`)\n      .attr('clip-path', `url(${href}#${this._getClipPathId()})`);\n\n    return this._g;\n  }\n\n  g (gElement?: any) {\n    if (gElement === undefined) {\n      return this._g;\n    }\n    this._g = gElement;\n    return this;\n  }\n\n  mouseZoomable (mouseZoomable?: any) {\n    if (mouseZoomable === undefined) {\n      return this._mouseZoomable;\n    }\n    this._mouseZoomable = mouseZoomable;\n    return this;\n  }\n\n  chartBodyG (chartBodyG?: any) {\n    if (chartBodyG === undefined) {\n      return this._chartBodyG;\n    }\n    this._chartBodyG = chartBodyG;\n    return this;\n  }\n\n  x (xScale?: any) {\n    if (xScale === undefined) {\n      return this._x;\n    }\n    this._x = xScale;\n    this._xOriginalDomain = this._x.domain();\n    this.rescale();\n    return this;\n  }\n\n  xOriginalDomain () {\n    return this._xOriginalDomain;\n  }\n\n  xUnits (xUnits?: any) {\n    if (xUnits === undefined) {\n      return this._xUnits;\n    }\n    this._xUnits = xUnits;\n    return this;\n  }\n\n  xAxis (xAxis?: any) {\n    if (xAxis === undefined) {\n      return this._xAxis;\n    }\n    this._xAxis = xAxis;\n    return this;\n  }\n\n  elasticX (elasticX?: any) {\n    if (elasticX === undefined) {\n      return this._xElasticity;\n    }\n    this._xElasticity = elasticX;\n    return this;\n  }\n\n  xAxisPadding (padding?: any) {\n    if (padding === undefined) {\n      return this._xAxisPadding;\n    }\n    this._xAxisPadding = padding;\n    return this;\n  }\n\n  xAxisPaddingUnit (unit?: any) {\n    if (unit === undefined) {\n      return this._xAxisPaddingUnit;\n    }\n    this._xAxisPaddingUnit = unit;\n    return this;\n  }\n\n  xUnitCount () {\n    if (this._unitCount === undefined) {\n      if (this.isOrdinal()) {\n        // In this case it number of items in domain\n        this._unitCount = this.x().domain().length;\n      } else {\n        this._unitCount = this.xUnits()(this.x().domain()[0], this.x().domain()[1]);\n\n        // Sometimes xUnits() may return an array while sometimes directly the count\n        if (this._unitCount instanceof Array) {\n          this._unitCount = this._unitCount.length;\n        }\n      }\n    }\n\n    return this._unitCount;\n  }\n\n  useRightYAxis (useRightYAxis?: any) {\n    if (useRightYAxis === undefined) {\n      return this._useRightYAxis;\n    }\n\n    // We need to warn if value is changing after self._yAxis was created\n    if (this._useRightYAxis !== useRightYAxis && this._yAxis) {\n      logger.warn('Value of useRightYAxis has been altered, after yAxis was created. ' +\n        'You might get unexpected yAxis behavior. ' +\n        'Make calls to useRightYAxis sooner in your chart creation process.');\n    }\n\n    this._useRightYAxis = useRightYAxis;\n    return this;\n  }\n\n  isOrdinal () {\n    return this.xUnits() === units.ordinal;\n  }\n\n  _useOuterPadding () {\n    return true;\n  }\n\n  _ordinalXDomain () {\n    const groups = this._computeOrderedGroups(this.data());\n    return groups.map(this.keyAccessor());\n  }\n\n  _prepareXAxis (g: any, render: any) {\n    if (!this.isOrdinal()) {\n      if (this.elasticX()) {\n        this._x.domain([this.xAxisMin(), this.xAxisMax()]);\n      }\n    } else { // self._chart.isOrdinal()\n      // D3v4 - Ordinal charts would need scaleBand\n      // bandwidth is a method in scaleBand\n      // (https://github.com/d3/d3-scale/blob/master/README.md#scaleBand)\n      if (!this._x.bandwidth) {\n        // If self._x is not a scaleBand create a new scale and\n        // copy the original domain to the new scale\n        logger.warn('For compatibility with d3v4+, dc.js d3.0 ordinal bar/line/bubble charts need ' +\n          'd3.scaleBand() for the x scale, instead of d3.scaleOrdinal(). ' +\n          'Replacing .x() with a d3.scaleBand with the same domain - ' +\n          'make the same change in your code to avoid this warning!');\n        this._x = scaleBand().domain(this._x.domain());\n      }\n\n      if (this.elasticX() || this._x.domain().length === 0) {\n        this._x.domain(this._ordinalXDomain());\n      }\n    }\n\n    // has the domain changed?\n    const xdom = this._x.domain();\n    if (render || !utils.arraysEqual(this._lastXDomain, xdom)) {\n      this.rescale();\n    }\n    this._lastXDomain = xdom;\n\n    // please can't we always use rangeBands for bar charts?\n    if (this.isOrdinal()) {\n      this._x.range([0, this.xAxisLength()])\n        .paddingInner(this._fRangeBandPadding)\n        .paddingOuter(this._useOuterPadding() ? this._fOuterRangeBandPadding : 0);\n    } else {\n      this._x.range([0, this.xAxisLength()]);\n    }\n\n    this._xAxis = this._xAxis.scale(this.x());\n\n    this._renderVerticalGridLines(g);\n  }\n\n  renderXAxis (g: any) {\n    let axisXG = g.select('g.x');\n\n    if (axisXG.empty()) {\n      axisXG = g.append('g')\n        .attr('class', 'axis x')\n        .attr('transform', `translate(${this.margins().left},${this._xAxisY()})`);\n    }\n\n    let axisXLab = g.select(`text.${X_AXIS_LABEL_CLASS}`);\n    if (axisXLab.empty() && this.xAxisLabel()) {\n      axisXLab = g.append('text')\n        .attr('class', X_AXIS_LABEL_CLASS)\n        .attr('transform', `translate(${this.margins().left + this.xAxisLength() / 2},${\n          this.height() - this._xAxisLabelPadding})`)\n        .attr('text-anchor', 'middle');\n    }\n    if (this.xAxisLabel() && axisXLab.text() !== this.xAxisLabel()) {\n      axisXLab.text(this.xAxisLabel());\n    }\n\n    transition(axisXG, this.transitionDuration(), this.transitionDelay())\n      .attr('transform', `translate(${this.margins().left},${this._xAxisY()})`)\n      .call(this._xAxis);\n    transition(axisXLab, this.transitionDuration(), this.transitionDelay())\n      .attr('transform', `translate(${this.margins().left + this.xAxisLength() / 2},${\n        this.height() - this._xAxisLabelPadding})`);\n  }\n\n  _renderVerticalGridLines (g: any) {\n    let gridLineG = g.select(`g.${VERTICAL_CLASS}`);\n\n    if (this._renderVerticalGridLine) {\n      if (gridLineG.empty()) {\n        gridLineG = g.insert('g', ':first-child')\n          .attr('class', `${GRID_LINE_CLASS} ${VERTICAL_CLASS}`)\n          .attr('transform', `translate(${this.margins().left},${this.margins().top})`);\n      }\n\n      const ticks = this._xAxis.tickValues() ? this._xAxis.tickValues() :\n        (typeof this._x.ticks === 'function' ? this._x.ticks.apply(this._x, this._xAxis.tickArguments()) : this._x.domain());\n\n      const lines = gridLineG.selectAll('line')\n        .data(ticks);\n\n      // enter\n      const linesGEnter = lines.enter()\n        .append('line')\n        .attr('x1', (d: any) => this._x(d))\n        .attr('y1', this._xAxisY() - this.margins().top)\n        .attr('x2', (d: any) => this._x(d))\n        .attr('y2', 0)\n        .attr('opacity', 0);\n      transition(linesGEnter, this.transitionDuration(), this.transitionDelay())\n        .attr('opacity', 0.5);\n\n      // update\n      transition(lines, this.transitionDuration(), this.transitionDelay())\n        .attr('x1', d => this._x(d))\n        .attr('y1', this._xAxisY() - this.margins().top)\n        .attr('x2', d => this._x(d))\n        .attr('y2', 0);\n\n      // exit\n      lines.exit().remove();\n    } else {\n      gridLineG.selectAll('line').remove();\n    }\n  }\n\n  _xAxisY () {\n    return (this.height() - this.margins().bottom);\n  }\n\n  xAxisLength () {\n    return this.effectiveWidth();\n  }\n\n  xAxisLabel (labelText?: any, padding?: any) {\n    if (labelText === undefined) {\n      return this._xAxisLabel;\n    }\n    this._xAxisLabel = labelText;\n    this.margins().bottom -= this._xAxisLabelPadding;\n    this._xAxisLabelPadding = (padding === undefined) ? DEFAULT_AXIS_LABEL_PADDING : padding;\n    this.margins().bottom += this._xAxisLabelPadding;\n    return this;\n  }\n\n  _createYAxis () {\n    // @ts-ignore\n    return this._useRightYAxis ? axisRight() : axisLeft();\n  }\n\n  _prepareYAxis (g: any) {\n    if (this._y === undefined || this.elasticY()) {\n      if (this._y === undefined) {\n        this._y = scaleLinear();\n      }\n      const _min = this.yAxisMin() || 0;\n      const _max = this.yAxisMax() || 0;\n      this._y.domain([_min, _max]).rangeRound([this.yAxisHeight(), 0]);\n    }\n\n    this._y.range([this.yAxisHeight(), 0]);\n\n    if (!this._yAxis) {\n      this._yAxis = this._createYAxis();\n    }\n\n    this._yAxis.scale(this._y);\n\n    this._renderHorizontalGridLinesForAxis(g, this._y, this._yAxis);\n  }\n\n  renderYAxisLabel (axisClass?: any, text?: any, rotation?: any, labelXPosition?: any) {\n    labelXPosition = labelXPosition || this._yAxisLabelPadding;\n\n    let axisYLab = this.g().select(`text.${Y_AXIS_LABEL_CLASS}.${axisClass}-label`);\n    const labelYPosition = (this.margins().top + this.yAxisHeight() / 2);\n    if (axisYLab.empty() && text) {\n      axisYLab = this.g().append('text')\n        .attr('transform', `translate(${labelXPosition},${labelYPosition}),rotate(${rotation})`)\n        .attr('class', `${Y_AXIS_LABEL_CLASS} ${axisClass}-label`)\n        .attr('text-anchor', 'middle')\n        .text(text);\n    }\n    if (text && axisYLab.text() !== text) {\n      axisYLab.text(text);\n    }\n    transition(axisYLab, this.transitionDuration(), this.transitionDelay())\n      .attr('transform', `translate(${labelXPosition},${labelYPosition}),rotate(${rotation})`);\n  }\n\n  renderYAxisAt (axisClass: any, axis: any, position: any) {\n    let axisYG = this.g().select(`g.${axisClass}`);\n    if (axisYG.empty()) {\n      axisYG = this.g().append('g')\n        .attr('class', `axis ${axisClass}`)\n        .attr('transform', `translate(${position},${this.margins().top})`);\n    }\n\n    transition(axisYG, this.transitionDuration(), this.transitionDelay())\n      .attr('transform', `translate(${position},${this.margins().top})`)\n      .call(axis);\n  }\n\n  renderYAxis (g?: any) {\n    const axisPosition = this._useRightYAxis ? (this.width() - this.margins().right) : this._yAxisX();\n    this.renderYAxisAt('y', this._yAxis, axisPosition);\n    const labelPosition = this._useRightYAxis ? (this.width() - this._yAxisLabelPadding) : this._yAxisLabelPadding;\n    const rotation = this._useRightYAxis ? 90 : -90;\n    this.renderYAxisLabel('y', this.yAxisLabel(), rotation, labelPosition);\n  }\n\n  _renderHorizontalGridLinesForAxis (g: any, scale: any, axis: any) {\n    let gridLineG = g.select(`g.${HORIZONTAL_CLASS}`);\n\n    if (this._renderHorizontalGridLine) {\n      // see https://github.com/d3/d3-axis/blob/master/src/axis.js#L48\n      const ticks = axis.tickValues() ? axis.tickValues() :\n        (scale.ticks ? scale.ticks.apply(scale, axis.tickArguments()) : scale.domain());\n\n      if (gridLineG.empty()) {\n        gridLineG = g.insert('g', ':first-child')\n          .attr('class', `${GRID_LINE_CLASS} ${HORIZONTAL_CLASS}`)\n          .attr('transform', `translate(${this.margins().left},${this.margins().top})`);\n      }\n\n      const lines = gridLineG.selectAll('line')\n        .data(ticks);\n\n      // enter\n      const linesGEnter = lines.enter()\n        .append('line')\n        .attr('x1', 1)\n        .attr('y1', (d: any) => scale(d))\n        .attr('x2', this.xAxisLength())\n        .attr('y2', (d: any) => scale(d))\n        .attr('opacity', 0);\n      transition(linesGEnter, this.transitionDuration(), this.transitionDelay())\n        .attr('opacity', 0.5);\n\n      // update\n      transition(lines, this.transitionDuration(), this.transitionDelay())\n        .attr('x1', 1)\n        .attr('y1', d => scale(d))\n        .attr('x2', this.xAxisLength())\n        .attr('y2', d => scale(d));\n\n      // exit\n      lines.exit().remove();\n    } else {\n      gridLineG.selectAll('line').remove();\n    }\n  }\n\n  _yAxisX () {\n    return this.useRightYAxis() ? this.width() - this.margins().right : this.margins().left;\n  }\n\n  yAxisLabel (labelText?: any, padding?: any) {\n    if (labelText === undefined) {\n      return this._yAxisLabel;\n    }\n    this._yAxisLabel = labelText;\n    this.margins().left -= this._yAxisLabelPadding;\n    this._yAxisLabelPadding = (padding === undefined) ? DEFAULT_AXIS_LABEL_PADDING : padding;\n    this.margins().left += this._yAxisLabelPadding;\n    return this;\n  }\n\n  y (yScale?: any) {\n    if (yScale === undefined) {\n      return this._y;\n    }\n    this._y = yScale;\n    this.rescale();\n    return this;\n  }\n\n  yAxis (yAxis?: any) {\n    if (yAxis === undefined) {\n      if (!this._yAxis) {\n        this._yAxis = this._createYAxis();\n      }\n      return this._yAxis;\n    }\n    this._yAxis = yAxis;\n    return this;\n  }\n\n  elasticY (elasticY?: any) {\n    if (elasticY === undefined) {\n      return this._yElasticity;\n    }\n    this._yElasticity = elasticY;\n    return this;\n  }\n\n  renderHorizontalGridLines (renderHorizontalGridLines?: any) {\n    if (renderHorizontalGridLines === undefined) {\n      return this._renderHorizontalGridLine;\n    }\n    this._renderHorizontalGridLine = renderHorizontalGridLines;\n    return this;\n  }\n\n  renderVerticalGridLines (renderVerticalGridLines?: any) {\n    if (renderVerticalGridLines === undefined) {\n      return this._renderVerticalGridLine;\n    }\n    this._renderVerticalGridLine = renderVerticalGridLines;\n    return this;\n  }\n\n  xAxisMin () {\n    const m = min(this.data(), e => this.keyAccessor()(e));\n    // @ts-ignore\n    return utils.subtract(m, this._xAxisPadding, this._xAxisPaddingUnit);\n  }\n\n  xAxisMax () {\n    const m = max(this.data(), e => this.keyAccessor()(e));\n    // @ts-ignore\n    return utils.add(m, this._xAxisPadding, this._xAxisPaddingUnit);\n  }\n\n  yAxisMin () {\n    const m = min(this.data(), e => this.valueAccessor()(e));\n    // @ts-ignore\n    return utils.subtract(m, this._yAxisPadding);\n  }\n\n  yAxisMax () {\n    const m = max(this.data(), e => this.valueAccessor()(e));\n    // @ts-ignore\n    return utils.add(m, this._yAxisPadding);\n  }\n\n  yAxisPadding (padding?: any) {\n    if (padding === undefined) {\n      return this._yAxisPadding;\n    }\n    this._yAxisPadding = padding;\n    return this;\n  }\n\n  yAxisHeight () {\n    return this.effectiveHeight();\n  }\n\n  round (round?: any) {\n    if (round === undefined) {\n      return this._round;\n    }\n    this._round = round;\n    return this;\n  }\n\n  _rangeBandPadding (_?: any) {\n    if (_ === undefined) {\n      return this._fRangeBandPadding;\n    }\n    this._fRangeBandPadding = _;\n    return this;\n  }\n\n  _outerRangeBandPadding (_?: any) {\n    if (_ === undefined) {\n      return this._fOuterRangeBandPadding;\n    }\n    this._fOuterRangeBandPadding = _;\n    return this;\n  }\n\n  filter (_?: any) {\n    if (_ === undefined) {\n      return super.filter();\n    }\n\n    super.filter(_);\n\n    this.redrawBrush(_, false);\n\n    return this;\n  }\n\n  brush (_?: any) {\n    if (_ === undefined) {\n      return this._brush;\n    }\n    this._brush = _;\n    return this;\n  }\n\n  renderBrush (g: any, doTransition: any) {\n    if (this._brushOn) {\n      this._brush.on('start brush end', () => this._brushing());\n\n      // To retrieve selection we need self._gBrush\n      this._gBrush = g.append('g')\n        .attr('class', 'brush')\n        .attr('transform', `translate(${this.margins().left},${this.margins().top})`);\n\n      this.setBrushExtents();\n\n      this.createBrushHandlePaths(this._gBrush, doTransition);\n\n      this.redrawBrush(this.filter(), doTransition);\n    }\n  }\n\n  createBrushHandlePaths (gBrush?: any, option?: any) {\n    let brushHandles = gBrush.selectAll(`path.${CUSTOM_BRUSH_HANDLE_CLASS}`).data([{type: 'w'}, {type: 'e'}]);\n\n    brushHandles = brushHandles\n      .enter()\n      .append('path')\n      .attr('class', CUSTOM_BRUSH_HANDLE_CLASS)\n      .merge(brushHandles);\n\n    brushHandles\n      .attr('d', (d: any) => this.resizeHandlePath(d));\n  }\n\n  extendBrush (brushSelection: any) {\n    if (brushSelection && this.round()) {\n      brushSelection[0] = this.round()(brushSelection[0]);\n      brushSelection[1] = this.round()(brushSelection[1]);\n    }\n    return brushSelection;\n  }\n\n  brushIsEmpty (brushSelection: any) {\n    return !brushSelection || brushSelection[1] <= brushSelection[0];\n  }\n\n  _brushing () {\n    // Avoids infinite recursion (mutual recursion between range and focus operations)\n    // Source Event will be null when brush.move is called programmatically (see below as well).\n    // @ts-ignore\n    if (!event.sourceEvent) {\n      return;\n    }\n\n    // Ignore event if recursive event - i.e. not directly generated by user action (like mouse/touch etc.)\n    // In this case we are more worried about this handler causing brush move programmatically which will\n    // cause this handler to be invoked again with a new d3.event (and current event set as sourceEvent)\n    // This check avoids recursive calls\n    // @ts-ignore\n    if (event.sourceEvent.type && ['start', 'brush', 'end'].indexOf(event.sourceEvent.type) !== -1) {\n      return;\n    }\n\n    // @ts-ignore\n    let brushSelection = event.selection;\n    if (brushSelection) {\n      brushSelection = brushSelection.map(this.x().invert);\n    }\n\n    brushSelection = this.extendBrush(brushSelection);\n\n    this.redrawBrush(brushSelection, false);\n\n    const rangedFilter = this.brushIsEmpty(brushSelection) ? null : filters.RangedFilter(brushSelection[0], brushSelection[1]);\n\n    events.trigger(() => {\n      this.applyBrushSelection(rangedFilter);\n    }, constants.EVENT_DELAY);\n  }\n\n  // This can be overridden in a derived chart. For example Composite chart overrides it\n  applyBrushSelection (rangedFilter: any) {\n    this.replaceFilter(rangedFilter);\n    this.redrawGroup();\n  }\n\n  setBrushExtents (doTransition?: any) {\n    // Set boundaries of the brush, must set it before applying to self._gBrush\n    this._brush.extent([[0, 0], [this.effectiveWidth(), this.effectiveHeight()]]);\n\n    this._gBrush\n      .call(this._brush);\n  }\n\n  redrawBrush (brushSelection: any, doTransition: any) {\n    if (this._brushOn && this._gBrush) {\n      if (this._resizing) {\n        this.setBrushExtents(doTransition);\n      }\n\n      if (!brushSelection) {\n        this._gBrush\n          .call(this._brush.move, null);\n\n        this._gBrush.selectAll(`path.${CUSTOM_BRUSH_HANDLE_CLASS}`)\n          .attr('display', 'none');\n      } else {\n        const scaledSelection = [this._x(brushSelection[0]), this._x(brushSelection[1])];\n\n        const gBrush =\n          optionalTransition(doTransition, this.transitionDuration(), this.transitionDelay())(this._gBrush);\n\n        // @ts-ignore\n        gBrush\n          .call(this._brush.move, scaledSelection);\n\n        // @ts-ignore\n        gBrush.selectAll(`path.${CUSTOM_BRUSH_HANDLE_CLASS}`)\n          .attr('display', null)\n          .attr('transform', (d: any, i: any) => `translate(${this._x(brushSelection[i])}, 0)`)\n          .attr('d', (d: any) => this.resizeHandlePath(d));\n      }\n    }\n    this.fadeDeselectedArea(brushSelection);\n  }\n\n  fadeDeselectedArea (brushSelection: any) {\n    // do nothing, sub-chart should override this function\n  }\n\n  // borrowed from Crossfilter example\n  resizeHandlePath (d: any) {\n    d = d.type;\n    const e = +(d === 'e'), x = e ? 1 : -1, y = this.effectiveHeight() / 3;\n    return `M${0.5 * x},${y\n      }A6,6 0 0 ${e} ${6.5 * x},${y + 6\n      }V${2 * y - 6\n      }A6,6 0 0 ${e} ${0.5 * x},${2 * y\n      }Z` +\n      `M${2.5 * x},${y + 8\n      }V${2 * y - 8\n      }M${4.5 * x},${y + 8\n      }V${2 * y - 8}`;\n  }\n\n  _getClipPathId () {\n    return `${this.anchorName().replace(/[ .#=\\[\\]\"]/g, '-')}-clip`;\n  }\n\n  clipPadding (padding?: any) {\n    if (padding === undefined) {\n      return this._clipPadding;\n    }\n    this._clipPadding = padding;\n    return this;\n  }\n\n  _generateClipPath () {\n    // @ts-ignore\n    const defs = utils.appendOrSelect(this._parent, 'defs');\n    // cannot select <clippath> elements; bug in WebKit, must select by id\n    // https://groups.google.com/forum/#!topic/d3-js/6EpAzQ2gU9I\n    const id = this._getClipPathId();\n    const chartBodyClip = utils.appendOrSelect(defs, `#${id}`, 'clipPath').attr('id', id);\n\n    const padding = this._clipPadding * 2;\n\n    // @ts-ignore\n    utils.appendOrSelect(chartBodyClip, 'rect')\n      .attr('width', this.xAxisLength() + padding)\n      .attr('height', this.yAxisHeight() + padding)\n      .attr('transform', `translate(-${this._clipPadding}, -${this._clipPadding})`);\n  }\n\n  _preprocessData () {\n  }\n\n  _doRender () {\n    this.resetSvg();\n\n    this._preprocessData();\n\n    this._generateG();\n    this._generateClipPath();\n\n    this._drawChart(true);\n\n    this._configureMouseZoom();\n\n    return this;\n  }\n\n  _doRedraw () {\n    this._preprocessData();\n\n    this._drawChart(false);\n    this._generateClipPath();\n\n    return this;\n  }\n\n  _drawChart (render: any) {\n    if (this.isOrdinal()) {\n      this._brushOn = false;\n    }\n\n    this._prepareXAxis(this.g(), render);\n    this._prepareYAxis(this.g());\n\n    this['plotData']();\n\n    if (this.elasticX() || this._resizing || render) {\n      this.renderXAxis(this.g());\n    }\n\n    if (this.elasticY() || this._resizing || render) {\n      this.renderYAxis(this.g());\n    }\n\n    if (render) {\n      this.renderBrush(this.g(), false);\n    } else {\n      // Animate the brush only while resizing\n      this.redrawBrush(this.filter(), this._resizing);\n    }\n    this.fadeDeselectedArea(this.filter());\n    this.resizing(false);\n  }\n\n  _configureMouseZoom () {\n    // Save a copy of original x scale\n    this._origX = this._x.copy();\n\n    if (this._mouseZoomable) {\n      this._enableMouseZoom();\n    } else if (this._hasBeenMouseZoomable) {\n      this._disableMouseZoom();\n    }\n  }\n\n  _enableMouseZoom () {\n    this._hasBeenMouseZoomable = true;\n\n    const extent = [[0, 0], [this.effectiveWidth(), this.effectiveHeight()]];\n\n    this._zoom\n      .scaleExtent(this._zoomScale)\n      .extent(extent)\n      .duration(this.transitionDuration());\n\n    if (this._zoomOutRestrict) {\n      // Ensure minimum zoomScale is at least 1\n      const zoomScaleMin = Math.max(this._zoomScale[0], 1);\n      this._zoom\n        .translateExtent(extent)\n        .scaleExtent([zoomScaleMin, this._zoomScale[1]]);\n    }\n\n    this.root().call(this._zoom);\n\n    // Tell D3 zoom our current zoom/pan status\n    this._updateD3zoomTransform();\n  }\n\n  _disableMouseZoom () {\n    this.root().call(this._nullZoom);\n  }\n\n  _zoomHandler (newDomain: any, noRaiseEvents: any) {\n    let domFilter: any;\n\n    if (this._hasRangeSelected(newDomain)) {\n      this.x().domain(newDomain);\n      domFilter = filters.RangedFilter(newDomain[0], newDomain[1]);\n    } else {\n      this.x().domain(this._xOriginalDomain);\n      domFilter = null;\n    }\n\n    this.replaceFilter(domFilter);\n    this.rescale();\n    this.redraw();\n\n    if (!noRaiseEvents) {\n      if (this._rangeChart && !utils.arraysEqual(this.filter(), this._rangeChart.filter())) {\n        events.trigger(() => {\n          // @ts-ignore\n          this._rangeChart.replaceFilter(domFilter);\n          this._rangeChart.redraw();\n        });\n      }\n\n      this._invokeZoomedListener();\n      events.trigger(() => {\n        this.redrawGroup();\n      }, constants.EVENT_DELAY);\n    }\n  }\n\n  // event.transform.rescaleX(self._origX).domain() should give back newDomain\n  _domainToZoomTransform (newDomain: any, origDomain: any, xScale: any) {\n    const k = (origDomain[1] - origDomain[0]) / (newDomain[1] - newDomain[0]);\n    const xt = -1 * xScale(newDomain[0]);\n\n    return zoomIdentity.scale(k).translate(xt, 0);\n  }\n\n  // If we changing zoom status (for example by calling focus), tell D3 zoom about it\n  _updateD3zoomTransform () {\n    if (this._zoom) {\n      this._zoom.transform(this.root(), this._domainToZoomTransform(this.x().domain(), this._xOriginalDomain, this._origX));\n    }\n  }\n\n  _onZoom () {\n    // Avoids infinite recursion (mutual recursion between range and focus operations)\n    // Source Event will be null when zoom is called programmatically (see below as well).\n    // @ts-ignore\n    if (!event.sourceEvent) {\n      return;\n    }\n\n    // Ignore event if recursive event - i.e. not directly generated by user action (like mouse/touch etc.)\n    // In this case we are more worried about this handler causing zoom programmatically which will\n    // cause this handler to be invoked again with a new d3.event (and current event set as sourceEvent)\n    // This check avoids recursive calls\n    // @ts-ignore\n    if (event.sourceEvent.type && ['start', 'zoom', 'end'].indexOf(event.sourceEvent.type) !== -1) {\n      return;\n    }\n\n    // @ts-ignore\n    const newDomain = event.transform.rescaleX(this._origX).domain();\n    this.focus(newDomain, false);\n  }\n\n  _checkExtents (ext: any, outerLimits: any) {\n    if (!ext || ext.length !== 2 || !outerLimits || outerLimits.length !== 2) {\n      return ext;\n    }\n\n    if (ext[0] > outerLimits[1] || ext[1] < outerLimits[0]) {\n      console.warn('Could not intersect extents, will reset');\n    }\n    // Math.max does not work (as the values may be dates as well)\n    return [ext[0] > outerLimits[0] ? ext[0] : outerLimits[0], ext[1] < outerLimits[1] ? ext[1] : outerLimits[1]];\n  }\n\n  focus (range: any, noRaiseEvents: any) {\n    if (this._zoomOutRestrict) {\n      // ensure range is within self._xOriginalDomain\n      range = this._checkExtents(range, this._xOriginalDomain);\n\n      // If it has an associated range chart ensure range is within domain of that rangeChart\n      if (this._rangeChart) {\n        range = this._checkExtents(range, this._rangeChart.x().domain());\n      }\n    }\n\n    this._zoomHandler(range, noRaiseEvents);\n    this._updateD3zoomTransform();\n  }\n\n  refocused () {\n    return !utils.arraysEqual(this.x().domain(), this._xOriginalDomain);\n  }\n\n  focusChart (c?: any) {\n    if (c === undefined) {\n      return this._focusChart;\n    }\n    this._focusChart = c;\n    this.on('filtered.dcjs-range-chart', (chart: any) => {\n      if (!chart.filter()) {\n        events.trigger(() => {\n          this._focusChart.x().domain(this._focusChart.xOriginalDomain(), true);\n        });\n      } else if (!utils.arraysEqual(chart.filter(), this._focusChart.filter())) {\n        events.trigger(() => {\n          this._focusChart.focus(chart.filter(), true);\n        });\n      }\n    });\n    return this;\n  }\n\n  brushOn (brushOn?: any) {\n    if (brushOn === undefined) {\n      return this._brushOn;\n    }\n    this._brushOn = brushOn;\n    return this;\n  }\n\n  parentBrushOn (brushOn?: any) {\n    if (brushOn === undefined) {\n      return this._parentBrushOn;\n    }\n    this._parentBrushOn = brushOn;\n    return this;\n  }\n\n  // Get the SVG rendered brush\n  gBrush () {\n    return this._gBrush;\n  }\n\n  _hasRangeSelected (range: any) {\n    return range instanceof Array && range.length > 1;\n  }\n}\n","import {filters, transition, utils, pluck, events} from 'dc';\nimport * as _ from 'lodash';\nimport * as d3 from 'd3';\nimport {CoordinateGridMixin} from '../base/coordinate-grid-mixin';\n\nconst constants = {\n  CHART_CLASS: 'dj-chart',\n  DEBUG_GROUP_CLASS: 'debug',\n  STACK_CLASS: 'stack',\n  DESELECTED_CLASS: 'deselected',\n  SELECTED_CLASS: 'selected',\n  NODE_INDEX_NAME: '__index__',\n  GROUP_INDEX_NAME: '__group_index__',\n  DEFAULT_CHART_GROUP: '__default_chart_group__',\n  EVENT_DELAY: 40,\n  NEGLIGIBLE_NUMBER: 1e-10\n};\n\nexport class MultiChart extends CoordinateGridMixin {\n\n  private _gap: any = 2;\n  private MIN_BAR_WIDTH = 1;\n  private _centerBar = true;\n  private _symbol = d3.symbol();\n  private _click = null;\n  private _dashStyle: any;\n  private _defined: any;\n  private _barWidth: any;\n  private _locator: any;\n  private _annotateLocation: any;\n  private _highlightedSize = 7;\n  private _symbolSize = 5;\n  private _excludedSize = 3;\n  private _excludedColor = null;\n  private _excludedOpacity = 1.0;\n  private __filter: any;\n  private _emptySize = 0;\n  private _filtered = [];\n  private _existenceAccessor: any;\n  private lines: any;\n  private originalKeyAccessor;\n  private multiOption;\n  _tooltip: any;\n\n  x: any;\n  _x: any;\n  y: any;\n  g: any;\n  brush: any;\n  _widthCalc: any;\n  redrawBrush: any;\n  redrawGroup: any;\n  filter: any;\n  round: any;\n  label: any;\n  title: any;\n  svg: any;\n  data: any;\n  group: any;\n  width: any;\n  onClick: any;\n  getColor: any;\n  selectAll: any;\n  xAxisLength: any;\n  chartBodyG: any;\n  xUnitCount: any;\n  renderLabel: any;\n  yAxisHeight: any;\n  margins: any;\n  isOrdinal: any;\n  _groupName: any;\n  _groupScale: any;\n  keyAccessor: any;\n  valueAccessor: any;\n  colorAccessor: any;\n  yOriginalDomain: any;\n  transitionDuration: any;\n  transitionDelay: any;\n\n  constructor(element?: any, option?: any) {\n    super();\n    this.multiOption = option;\n    this.originalKeyAccessor = this.keyAccessor();\n\n    this.keyAccessor((d: any) => this.originalKeyAccessor(d)[0]);\n    this.valueAccessor((d: any) => this.originalKeyAccessor(d)[1]);\n    this.colorAccessor(() => this._groupName);\n    this.lines = () => this;\n    this._existenceAccessor = (d: any) => {\n      return d.value ? d.value : d.y;\n    };\n\n    this._symbol.size((d: any, i: number) => {\n      if (!this._existenceAccessor(d)) {\n        return this._emptySize;\n      } else if (this._filtered[i]) {\n        return Math.pow(this._symbolSize, 2);\n      } else {\n        return Math.pow(this._excludedSize, 2);\n      }\n    });\n  }\n\n  _filter(filter?: any) {\n    if (!filter) {\n      return this.__filter();\n    }\n    return this.__filter(filters.RangedTwoDimensionalFilter(filter));\n  }\n\n  plotData(zoomX?: any, zoomY?: any) {\n    const chartList: any[] = [];\n    let type;\n    let axisLabel;\n    let yAxisLabel;\n    let errorBar;\n    let chartOption: any;\n    let axisWidth: any;\n    let clipPath;\n    if (this.svg()) {\n      clipPath = this.svg().select('.chart-body').attr('clip-path');\n    } else {\n      clipPath = this.g().select('.chart-body').attr('clip-path');\n    }\n    this.chartBodyG().attr('clip-path', clipPath);\n\n    this.multiOption.axisOption.forEach((v: any) => {\n      if (v.series) {\n        chartList.push(v.series);\n        if (this.data()[0].key[0].toString() === v.series.toString()) {\n          type = v.type;\n          axisLabel = v.axisLabel;\n        }\n        if (this._groupName === v.series) {\n          yAxisLabel = v.axisLabel;\n          errorBar = v.errorBar;\n          chartOption = v;\n        }\n      }\n    });\n\n    if (chartOption) {\n      // stacks 가 있으면 stack 설정\n      if (chartOption.stacks) {\n        const _stacks: any = [];\n        const sel_stack = ((key: any) => (d: any) => d.value[key]);\n        chartOption.stacks.forEach((d: any) => {\n          const layer = {group: this.group(), name: d, accessor: sel_stack};\n          _stacks.push(layer);\n        });\n        this.data = () => {\n          const layers = _stacks.filter((l: any) => !l.hidden);\n          if (!layers.length) {\n            return [];\n          }\n          layers.forEach((layer: any, layerIdx: any) => {\n            layer.name = String(layer.name || layerIdx);\n            const allValues = layer.group.all().map((d: any, i: number) => {\n              return {\n                x: this.keyAccessor()(d, i),\n                y: layer.hidden ? null : sel_stack(layer.name)(d),\n                data: d,\n                layer: layer.name,\n                hidden: layer.hidden\n              };\n            });\n            layer.domainValues = allValues;\n            layer.values = allValues;\n            layer['key'] = layer.group.all()[0].key;\n          });\n\n          const v4data = layers[0].values.map((v: any, i: number) => {\n            const col = {x: v.x};\n            layers.forEach((layer: any) => {\n              // @ts-ignore\n              col[layer.name] = layer.values[i].y;\n            });\n            return col;\n          });\n          const keys = layers.map((layer: any) => layer.name);\n          const v4result = d3.stack().keys(keys)(v4data);\n          v4result.forEach((series, i) => {\n            series.forEach((ys, j) => {\n              layers[i].values[j].y0 = ys[0];\n              layers[i].values[j].y1 = ys[1];\n            });\n          });\n          return layers;\n        };\n      }\n\n      // boolean 일때 설정\n      if (type === 'boolean') {\n        if (!chartOption.symbol) {\n          chartOption.symbol = 'square';\n        }\n        if (!chartOption.symbol) {\n          chartOption.symbol = 'square';\n        }\n        if (!chartOption.gap) {\n          chartOption.gap = 5;\n        }\n        if (!chartOption.size) {\n          chartOption.size = 7;\n        }\n        if (!chartOption.lineWidth) {\n          chartOption.lineWidth = 1.5;\n        }\n      }\n\n      const y = d3.scaleLinear().range([this.yAxisHeight(), 0]);\n      const yAxis = d3.axisRight(y).ticks(10);\n      if (chartOption.tickFormat) {\n        yAxis.tickFormat(chartOption.tickFormat);\n      }\n      if (chartOption.ticks) {\n        yAxis.ticks(chartOption.ticks);\n      }\n\n      // x domain 설정\n      if (zoomX) {\n        this.x().domain(zoomX);\n      }\n\n      // 도메인에 해당하는 데이터만 찾기기\n      const data: any = [];\n      let domain = this.x().domain();\n      this.data().forEach((v: any) => {\n        const x = v.key[0];\n        if (domain[0] <= x && domain[1] >= x) {\n          data.push(v);\n        }\n      });\n\n      // y domain 설정\n      let yDomain;\n      if (zoomY) { // zoom in 일때\n        domain = this._groupScale[this._groupName];\n        const area = (domain[0] - domain[0]) + (domain[1] - domain[0]);\n\n        if (type === 'boolean') {\n          y.domain([-0.5, 1.5]);\n          // @ts-ignore\n          yAxis.ticks(2).tickFormat((d: any) => {\n            if (!d) {\n              return 'FAIL';\n            } else if (d === 1) {\n              return 'PASS';\n            } else {\n              return null;\n            }\n          });\n        } else if (axisLabel === 'EVENT') {\n          y.domain(domain);\n        } else {\n          yDomain = [\n            (area / zoomY[0]) + domain[0] + (chartOption.gap ? -chartOption.gap : 0),\n            (area / zoomY[1]) + domain[0] + (chartOption.gap ? chartOption.gap : 0)\n          ];\n          y.domain([\n            (area / zoomY[0]) + domain[0] + (chartOption.gap ? -chartOption.gap : 0),\n            (area / zoomY[1]) + domain[0] + (chartOption.gap ? chartOption.gap : 0)\n          ]);\n        }\n        const dom = y.domain();\n      } else if (!zoomX && !zoomY && this.yOriginalDomain && this.yOriginalDomain()) {\n        y.domain(this.yOriginalDomain());\n      } else { // zoom out 일때\n        if (this.multiOption.axisOption) {\n          this.multiOption.axisOption.forEach((v: any) => {\n            if (this._groupName === v.series) {\n              domain = v.domain;\n            }\n          });\n        }\n        if (type === 'boolean') {\n          y.domain([-0.5, 1.5]);\n          // @ts-ignore\n          yAxis.ticks(2).tickFormat((d: any) => {\n            if (!d) {\n              return 'FAIL';\n            } else if (d === 1) {\n              return 'PASS';\n            } else {\n              return null;\n            }\n          });\n        } else if (axisLabel === 'EVENT') {\n          y.domain(domain);\n        } else if (domain) {\n          const dom = [domain[0] + (chartOption.gap ? -chartOption.gap : 0), domain[1] + (chartOption.gap ? chartOption.gap : 0)];\n          y.domain(dom);\n        } else {\n          const dom = [\n            // @ts-ignore\n            d3.min(data, (d: any) =>  typeof d.value === 'object' ? d.value.value : d.value) + (chartOption.gap ? -chartOption.gap : 0),\n            d3.max(data, (d: any) => typeof d.value === 'object' ? d.value.value : d.value) + (chartOption.gap ? chartOption.gap : 0)\n          ];\n          y.domain(dom);\n        }\n      }\n\n      this._locator = (d: any) => {\n        let rotate = '';\n        if (chartOption.symbolRotate) {\n          rotate = ' rotate(' + chartOption.symbolRotate + ')';\n        }\n        let bandwidth = 0;\n        if (this.x().bandwidth) {\n          bandwidth = this.x().bandwidth() / 2;\n        }\n\n        if (d.key) {\n          let check = this.y()(this.valueAccessor()(d));\n          if (isNaN(check)) {\n            check = 0;\n          }\n          return 'translate(' + (this.x()(this.keyAccessor()(d)) + bandwidth) + ',' + check + ')' + rotate;\n        } else {\n          let check = y(d.y);\n          if (isNaN(check)) {\n            check = 0;\n          }\n          return 'translate(' + (this.x()(d.x) + bandwidth) + ',' + check + ')' + rotate;\n        }\n      };\n\n      this._annotateLocation = (d: any) => {\n        let rotate = '';\n        if (chartOption.symbolRotate) {\n          rotate = ' rotate(' + chartOption.symbolRotate + ')';\n        }\n        if (d.key) {\n          let check = this.y()(this.valueAccessor()(d));\n          if (isNaN(check)) {\n            check = 0;\n          }\n          return 'translate(' + this.x()(this.keyAccessor()(d)) + ',' + check + ')' + rotate;\n        } else {\n          let check = y(d.y);\n          if (isNaN(check)) {\n            check = 0;\n          }\n          return 'translate(' + (this.x()(d.x) - 7) + ',' + (check - 10) + ')' + rotate;\n        }\n      };\n\n      if (!this._groupScale) {\n        this._groupScale = {};\n      }\n      this._groupScale[this._groupName] = y.domain();\n\n      // Y Axis 그리기\n      let axisPadding = 0;\n      for (let i = 0; i < chartList.indexOf(this._groupName); i++) {\n        if (i) {\n          axisPadding += this.multiOption.axisOption[i].width ? this.multiOption.axisOption[i].width + 35 : 0;\n        }\n      }\n\n      // chart 그리기\n      const valAccessor = this.valueAccessor();\n      let drawData = this.data();\n      if (!chartOption.stacks) {\n        drawData = [{\n          group: {\n            all: () => this.data()\n          },\n          name: this.data()[0].key[1].toString(),\n          values: this.data().map((d: any, i: number) => {\n            return {\n              x: this.keyAccessor()(d, i),\n              y: valAccessor(d, i),\n              z: d.value.z,\n              data: d,\n              layer: d.key[1],\n              hidden: undefined\n            };\n          })\n        }];\n      }\n\n      this.drawChart(type, y, drawData, chartOption, zoomX, yDomain);\n\n      if (!chartOption.hide) {\n        const axis = chartList.indexOf(this._groupName) ? yAxis : d3.axisLeft(y).ticks(10);\n        if (chartOption.tickFormat) {\n          axis.tickFormat(chartOption.tickFormat);\n        }\n        if (chartOption.ticks) {\n          axis.ticks(chartOption.ticks);\n        }\n        const axisClass = this.multiOption.axisOption.filter((d: any) => !d.hide).map((d: any) => d.series).indexOf(this._groupName);\n\n        const chartWith = this.renderYAxisAt(axisClass\n          , axis\n          , this.width() - this.margins().right + axisPadding);\n\n\n        axisWidth = this.renderYAxisAt(axisClass\n          , axis\n          , this.width() - this.margins().right + axisPadding) || 0;\n\n        // label\n        this.renderYAxisLabel(axisClass\n          , yAxisLabel\n          , 90\n          , this.width() - this.margins().right + axisWidth + 5 + axisPadding);\n      }\n\n      // set y right axis width\n      this.multiOption.axisOption.forEach((v: any) => {\n        if (this._groupName === v.series) {\n          v.width = axisWidth;\n        }\n      });\n    }\n\n    if (!this.yOriginalDomain) {\n      this.yOriginalDomain = () => {\n        let domain;\n        this.multiOption.axisOption.forEach((v: any) => {\n          if (this._groupName === v.series) {\n            domain = v.domain;\n          }\n        });\n        return domain;\n      };\n    }\n  }\n\n  click(click?: any) {\n    if (!click) {\n      return this._click;\n    }\n    this._click = click;\n    return this;\n  }\n\n  defined(defined?: any) {\n    if (!defined) {\n      return this._defined;\n    }\n    this._defined = defined;\n    return this;\n  }\n\n  dashStyle(dashStyle?: any) {\n    if (!dashStyle) {\n      return this._dashStyle;\n    }\n    this._dashStyle = dashStyle;\n    return this;\n  }\n\n  renderYAxisLabel(axisClass?: any, text?: any, rotation?: any, labelXPosition?: any) {\n    labelXPosition = labelXPosition || 0;\n    if (axisClass && this.svg()) {\n      let axisYLab = this.svg().selectAll('text.' + 'y-axis-label' + '.y' + axisClass + '-label');\n      const labelYPosition = ((this.margins().top + this.yAxisHeight()) / 2);\n      if (axisYLab.empty() && text) {\n        axisYLab = d3.select(this.g()._groups[0][0].parentNode).append('text')\n          .attr('transform', 'translate(' + labelXPosition + ',' + labelYPosition + '),rotate(' + rotation + ')')\n          .attr('class', 'y-axis-label' + ' y' + axisClass + '-label')\n          .attr('text-anchor', 'middle')\n          .text(text);\n      }\n      if (text && axisYLab.text() !== text) {\n        axisYLab.text(text);\n      }\n      transition(axisYLab, this.transitionDuration(), this.transitionDelay())\n        .attr('transform', 'translate(' + labelXPosition + ',' + labelYPosition + '),rotate(' + rotation + ')');\n    }\n  }\n\n  renderYAxisAt(axisClass: any, axis: any, position: any) {\n    let axisYG;\n    if (axisClass && this.svg()) {\n      axisYG = this.svg().selectAll('g.' + 'y' + axisClass);\n      if (axisYG.empty()) {\n        axisYG = d3.select(this.g()._groups[0][0].parentNode).append('g')\n          .attr('class', 'axis y-axis-at ' + 'y' + axisClass)\n          .attr('transform', 'translate(' + position + ',' + this.margins().top + ')');\n      }\n\n      transition(axisYG, this.transitionDuration(), this.transitionDelay())\n        .attr('transform', 'translate(' + position + ',' + this.margins().top + ')')\n        .call(axis);\n    } else {\n      if (this.svg()) {\n        axisYG = this.svg().select('g.' + 'y');\n      } else {\n        axisYG = d3.select(this.g()._groups[0][0].parentNode).select('g.' + 'y');\n      }\n\n      transition(axisYG, this.transitionDuration(), this.transitionDelay()).call(axis);\n    }\n\n    if (axisYG && axisYG._groups[0][0]) {\n      return axisYG._groups[0][0].getBoundingClientRect().width;\n    } else {\n      return 0;\n    }\n  }\n\n  private drawChart(chart: any, y: any, data: any, option: any, zoomX: any, zoomY: any) {\n    if (chart === 'lineSymbol') {\n      /*--------- line Start----------*/\n      const chartBody = this.chartBodyG();\n      let layersList = chartBody.selectAll('g.stack-list');\n      if (layersList.empty()) {\n        layersList = chartBody.append('g').attr('class', 'stack-list');\n      }\n      const layers = layersList.selectAll('g.stack').data(data);\n      const layersEnter = layers.enter().append('g').attr('class', (d: any, i: number) => 'stack ' + '_' + i);\n      this.drawLine(layersEnter, layers, y, option, option.smooth);\n      /*--------- line End----------*/\n\n      /*--------- symbol Start----------*/\n      const layers2 = this.chartBodyG().selectAll('path.symbol').data(data);\n      layers2.enter()\n        .append('g')\n        .attr('class', (d: any, i: number) => {\n          return 'stack ' + '_' + i;\n        });\n\n      data.forEach((d: any, i: number) => {\n        this.renderSymbol(d, option);\n      });\n\n      // 추가된 데이터가 있으면 다시 렌더\n      if (data.length !== layers.size()) {\n        this.plotData();\n      }\n      /*--------- symbol End----------*/\n\n      // renderArea 추가\n      if (option.renderArea) {\n        this.drawArea(layersEnter, layers, y, option, option.smooth ?  d3.curveMonotoneX : d3.curveCardinal.tension(1));\n      }\n    } else if (chart === 'smoothLine') {\n      /*--------- line Start----------*/\n      const chartBody = this.chartBodyG();\n      let layersList = chartBody.selectAll('g.stack-list');\n      if (layersList.empty()) {\n        layersList = chartBody.append('g').attr('class', 'stack-list');\n      }\n      const layers = layersList.selectAll('g.stack').data(data);\n      const layersEnter = layers.enter().append('g').attr('class', (d: any, i: number) => 'stack ' + '_' + i);\n      this.drawLine(layersEnter, layers, y, option, true);\n      /*--------- line End----------*/\n\n      /*--------- symbol Start----------*/\n      const layers2 = this.chartBodyG().selectAll('path.symbol').data(data);\n      layers2.enter()\n        .append('g')\n        .attr('class', (d: any, i: number) => {\n          return 'stack ' + '_' + i;\n        });\n\n      data.forEach((d: any, i: number) => {\n        this.renderSymbol(d, option);\n      });\n\n      // 추가된 데이터가 있으면 다시 렌더\n      if (data.length !== layers.size()) {\n        this.plotData();\n      }\n\n      // renderArea 추가\n      if (option.renderArea) {\n        this.drawArea(layersEnter, layers, y, option, d3.curveMonotoneX);\n      }\n      /*--------- symbol End----------*/\n    } else if (chart === 'line') {\n      const chartBody = this.chartBodyG();\n      let layersList = chartBody.selectAll('g.stack-list');\n      if (layersList.empty()) {\n        layersList = chartBody.append('g').attr('class', 'stack-list');\n      }\n      const layers = layersList.selectAll('g.stack').data(data);\n      const layersEnter = layers.enter().append('g').attr('class', (d: any, i: number) => 'stack ' + '_' + i);\n      this.drawLine(layersEnter, layers, y, option, option.smooth);\n\n      // 추가된 데이터가 있으면 다시 렌더\n      if (data.length !== layers.size()) {\n        this.plotData();\n      }\n\n      if (option.renderArea) {\n        this.drawArea(layersEnter, layers, y, option, option.smooth ?  d3.curveMonotoneX : d3.curveCardinal.tension(1));\n      }\n    } else if (chart === 'stepLine') {\n      const chartBody = this.chartBodyG();\n      let layersList = chartBody.selectAll('g.stack-list');\n      if (layersList.empty()) {\n        layersList = chartBody.append('g').attr('class', 'stack-list');\n      }\n      const layers = layersList.selectAll('g.stack').data(data);\n      const layersEnter = layers.enter().append('g').attr('class', (d: any, i: number) => 'stack ' + '_' + i);\n      this.stepLine(layersEnter, layers, y, option);\n      if (option.renderArea) {\n        this.drawArea(layersEnter, layers, y, option, d3.curveStepAfter);\n      }\n\n      // 추가된 데이터가 있으면 다시 렌더\n      if (data.length !== layers.size()) {\n        this.plotData();\n      }\n    } else if (chart === 'symbol' || chart === 'boolean') {\n      if (this.chartBodyG().selectAll('path.symbol').empty()) {\n        this.chartBodyG().append('path').attr('class', 'symbol');\n      }\n      const layers = this.chartBodyG().selectAll('path.symbol').data(data);\n      layers.enter()\n        .append('g')\n        .attr('class', (d: any, i: number) => 'stack ' + '_' + i);\n\n      data.forEach((d: any, i: number) => this.renderSymbol(d, option));\n    } else if (chart === 'bar') {\n      const bars = this.multiOption.axisOption.filter((d: any) => d.type === 'bar');\n      const barIndex = bars.map((d: any) => d.series).indexOf(this._groupName);\n      if (this.chartBodyG().selectAll('g.stack').empty()) {\n        this.chartBodyG().append('g').attr('class', 'stack _0');\n      }\n      const layers = this.chartBodyG().selectAll('g.stack').data(data);\n      this.calculateBarWidth();\n      layers.enter()\n        .append('g')\n        .attr('class', (d: any, i: number) => {\n          return 'stack ' + '_' + i;\n        })\n        .merge(layers);\n\n      const last = layers.size() - 1;\n      layers.each((d: any, i: number) => {\n        const layer = d3.select(d);\n        this.renderBars(layers, i, d, y, option, bars, barIndex);\n\n        if (this.renderLabel() && last === i) {\n          this.renderLabels(layer, i, d);\n        }\n      });\n    } else if (chart === 'thermal') {\n      const xStep = option.gap, yStep = 1;\n      if (zoomX && zoomY) {\n        this.x().domain([zoomX[0], +zoomX[1]]);\n        y.domain([zoomY[0], zoomY[1] + yStep]);\n      } else {\n        this.x().domain([this.multiOption.xRange[0] - (xStep / 2), +this.multiOption.xRange[1] + (xStep / 2)]);\n        y.domain([option.domain[0], option.domain[1] + yStep]);\n      }\n\n      const layers = this.chartBodyG().selectAll('rect.thermal').data(data);\n      layers.enter()\n        .append('g')\n        .attr('class', (d: any, i: number) => 'stack ' + '_' + i);\n\n      data.forEach((d: any, i: number) => this.renderThermal(d, option, xStep, yStep, y));\n    }\n  }\n\n  barPadding(barPadding?: any) {\n    if (!barPadding) {\n      return this._rangeBandPadding();\n    }\n    this._rangeBandPadding(barPadding);\n    this._gap = undefined;\n    return this;\n  }\n\n  private calculateBarWidth() {\n    if (this._barWidth === undefined) {\n      const numberOfBars = this.xUnitCount();\n      if (this.isOrdinal() && this._gap === undefined) {\n        this._barWidth = Math.floor(this.x().bandwidth());\n      } else if (this._gap) {\n        this._barWidth = Math.floor((this.xAxisLength() - (numberOfBars - 1) * this._gap) / numberOfBars);\n      } else {\n        this._barWidth = Math.floor(this.xAxisLength() / (1 + this.barPadding()) / numberOfBars);\n      }\n\n      if (this._barWidth === Infinity || isNaN(this._barWidth) || this._barWidth < this.MIN_BAR_WIDTH) {\n        this._barWidth = this.MIN_BAR_WIDTH;\n      }\n    }\n  }\n\n  private drawLine(layersEnter: any, layers: any, y: any, option: any, smooth?: any) {\n    let bandwidth = 0;\n    if (this.x().bandwidth) {\n      bandwidth = this.x().bandwidth() / 2;\n    }\n\n    const line = d3.line()\n      .x((d: any) => this.x()(d.x) + bandwidth)\n      .y((d: any) => y ? y(d.y) : this.y()(d.y))\n      .curve(smooth ? d3.curveMonotoneX : d3.curveCardinal.tension(1));\n\n    if (this._defined) {\n      line.defined(this._defined);\n    }\n\n    const path = layersEnter.append('path').attr('class', 'line').attr('stroke', option.color ? option.color : this.colors2.bind(this))\n      .attr('stroke', option.color ? option.color : this.colors2.bind(this))\n      .attr('d', (d: any) => this.safeD(line(d.values)))\n      .attr('chartKey', (d: any) => d.key)\n      .style('stroke-width', option.lineWidth + 'px');\n    if (option.dashStyle) {\n      path.attr('stroke-dasharray', option.dashStyle);\n    }\n\n    transition(layers.select('path.line'), this.transitionDuration(), this.transitionDelay())\n      .attr('stroke', option.color ? option.color : this.colors2.bind(this))\n      .attr('d', d => this.safeD(line(d.values)))\n      .attr('seriesKey', d => d.values[0].data.key[0])\n      .style('stroke-width', option.lineWidth + 'px');\n  }\n\n  private colors2(d: any, i: number) {\n    return this.getColor.call(d, d.values, i);\n  }\n\n  private safeD(d: any) {\n    return (!d || d.indexOf('NaN') >= 0) ? 'M0,0' : d;\n  }\n\n  private renderSymbol(d: any, option: any) {\n    const getSymbol = () => {\n      if (option.symbol) {\n        if (option.symbol === 'cross') {\n          return d3.symbolCross;\n        } else if (option.symbol === 'diamond') {\n          return d3.symbolDiamond;\n        } else if (option.symbol === 'square') {\n          return d3.symbolSquare;\n        } else if (option.symbol === 'star') {\n          return d3.symbolStar;\n        } else if (option.symbol === 'triangle') {\n          return d3.symbolTriangle;\n        } else if (option.symbol === 'wye') {\n          return d3.symbolWye;\n        } else {\n          return d3.symbolCircle;\n        }\n      } else {\n        return d3.symbolCircle;\n      }\n    };\n\n    const symbolSize = () => {\n      if (option.size) {\n        return option.size * option.size;\n      } else {\n        return 7 * 7;\n      }\n    };\n\n    const color = option.colorOption ? option.colorOption : (option.color || this.getColor);\n\n    const symbols = this.chartBodyG().selectAll('path.symbol').data(d.values);\n    symbols.enter()\n      .append('path').attr('class', 'symbol')\n      .attr('opacity', 0)\n      .attr('fill', option.color ? option.color : this.getColor)\n      .attr('transform', this._locator)\n      .attr('d', d3.symbol().type(getSymbol()).size(symbolSize()))\n      .on('click', (data: any) => {\n        if (this._click) {\n          // @ts-ignore\n          return this._click(d);\n        }\n      });\n\n    if (this.multiOption.tooltip) {\n      const tooltip = this.getTooltipElem();\n      symbols\n        .on('mousemove', (data: any) => {\n          // @ts-ignore\n          const pageX = event.pageX;\n          // @ts-ignore\n          const pageY = event.pageY;\n          let left = 0, top = 0;\n\n          tooltip.transition()\n            .duration(100)\n            .style('opacity', .9)\n            .style('background', color)\n            .style('border-color', color)\n            .style('z-index', 10000);\n          tooltip.html(this.multiOption.tooltip(data));\n\n          setTimeout(() => {\n            const toolX = tooltip.node().clientWidth;\n            const toolY = tooltip.node().clientHeight;\n            top = pageY - toolY - 15;\n            left = pageX - (toolX / 2);\n\n            tooltip\n              .style('top', top + 'px')\n              .style('left', left + 'px');\n          });\n        })\n        .on('mouseout', (data: any) => {\n          tooltip .transition()\n            .duration(200)\n            .style('opacity', 0)\n            .style('z-index', -1);\n        });\n    }\n\n    if (this.multiOption.onClick) {\n      // @ts-ignore\n      symbols.on('click', (data: any) => this.multiOption.onClick(data, event));\n    }\n\n    // @ts-ignore\n    transition(symbols, this.transitionDuration(), this.transitionDelay())\n      .attr('opacity', (data, i) => isNaN(this._existenceAccessor(data)) ? 0 : this._filtered[i] ? 1 : this.excludedOpacity())\n      .attr('stroke', (data, i) => {\n        if (this.excludedColor() && !this._filtered[i]) {\n          return this.excludedColor();\n        } else if (typeof color === 'function' ) {\n          return color(data.data.value);\n        } else {\n          return color;\n        }\n      })\n      .attr('seriesKey', data => data.data.key[0])\n      .attr('fill', '#fff')\n      .attr('transform', this._locator)\n      // @ts-ignore\n      .attr('d', d3.symbol().type(getSymbol()).size(symbolSize()));\n\n    transition(symbols.exit(), this.transitionDuration(), this.transitionDelay()).attr('opacity', 0).remove();\n\n    // 추가된 데이터가 있으면 다시 렌더\n    if (d.values && d.values.length !== symbols.size()) {\n      this.renderSymbol(d, option);\n    }\n  }\n\n  private barHeight(y: any, d: any) {\n    const rtn = +(this.yAxisHeight() - y(d.y)) < 0 ? 0 : utils.safeNumber(+(this.yAxisHeight() - y(d.y)));\n    if (d.y0 !== undefined) {\n      return (y(d.y0) - y(d.y + d.y0));\n    }\n\n    return rtn;\n  }\n\n  private drawArea(layersEnter: any, layers: any, y: any, option: any, curve: any) {\n    const area = d3.area()\n      .x((d: any) => this.x()(d.x))\n      .y1((d: any) =>  y ? y(d.y) : this.y()(d.y))\n      .y0((d: any) => {\n        if (option.renderAreaRange) {\n          return y ? y(option.renderAreaRange) : this.y()(option.renderAreaRange);\n        } else {\n          return this.yAxisHeight();\n        }\n      })\n      .curve(curve);\n    if (this._defined) {\n      area.defined(this._defined);\n    }\n\n    layersEnter.append('path')\n      .attr('class', 'area')\n      .attr('fill', option.color ? option.color : this.colors2.bind(this))\n      .attr('d', (d: any) => this.safeD(area(d.values)));\n\n    transition(layers.select('path.area'), this.transitionDuration(), this.transitionDelay())\n      .attr('stroke', option.color ? option.color : this.colors2.bind(this)).attr('d', d => this.safeD(area(d.values)));\n  }\n\n  private renderLabels(layer: any, layerIndex: any, d: any) {\n    const labels = layer.selectAll('text.barLabel')\n      .data(d.values, pluck('x'));\n\n    labels.enter()\n      .append('text')\n      .attr('class', 'barLabel')\n      .attr('text-anchor', 'middle');\n\n    if (this.isOrdinal()) {\n      labels.attr('cursor', 'pointer');\n    }\n\n    transition(labels, this.transitionDuration(), this.transitionDelay())\n      .attr('x', data => {\n        let x = this.x()(data.x);\n        if (!this._centerBar) {\n          x += this._barWidth / 2;\n        }\n        return utils.safeNumber(x);\n      })\n      .attr('y', data => {\n        let y = this.y()(data.y + data.y0);\n\n        if (data.y < 0) {\n          y -= this.barHeight(y, data);\n        }\n\n        return utils.safeNumber(y - 3);\n      })\n      .text(data =>  this.label()(data));\n\n    transition(labels.exit(), this.transitionDuration(), this.transitionDelay())\n      .attr('height', 0)\n      .remove();\n  }\n\n  private renderThermal(data: any, option: any, xStep: any, yStep: any, y: any) {\n    const symbols = this.chartBodyG().selectAll('rect.thermal').data(data.values);\n    symbols.enter().append('rect').attr('class', 'thermal');\n    transition(symbols, this.transitionDuration(), this.transitionDelay())\n      .attr('x', d => this.x()((+d.x - xStep / 2)))\n      .attr('y', d => y(+d.y + yStep))\n      .attr('width', this.x()(this.x().domain()[0] + xStep) - this.x()(this.x().domain()[0]))\n      .attr('height', y(y.domain()[0]) - y(y.domain()[0] + yStep))\n      .attr('opacity', d => isNaN(d.z) ? 0 : 1)\n      .style('fill', d => option.colorScale(option.colorAccessor(d.data)));\n    transition(symbols.exit(), this.transitionDuration(), this.transitionDelay()).attr('opacity', 0).remove();\n  }\n\n  private renderBars(layer: any, layerIndex: any, data: any, y: any, option: any, barlist: any, barIndex: any) {\n    const bars = layer.selectAll('rect.bar').data(data.values, pluck('x'));\n    let ordinalType = false;\n    if (option.barWidth) {\n      this._barWidth = option.barWidth;\n    }\n\n    if (this._x.bandwidth) {\n      ordinalType = true;\n      this._barWidth = this._x.bandwidth();\n    }\n\n    if (this.multiOption.xAxisOption && this.multiOption.xAxisOption.type === 'date') {\n      const {left, right} = this.margins();\n      const xAxisWidth = this._widthCalc() - left - right;\n      const uniqKeys = _.uniq(this.data().map((d: any) => d.key[1]));\n\n      this._barWidth = xAxisWidth / uniqKeys.length;\n    }\n\n    transition(bars.exit(), this.transitionDuration(), this.transitionDelay())\n      .attr('x', d => this.x()(d.x))\n      .attr('width', this._barWidth * 0.9)\n      .remove();\n\n    bars.enter()\n      .append('rect')\n      .attr('class', 'bar')\n      .attr('x', (d: any) => {\n        let x = this.x()(d.x);\n        if (this._centerBar && !this.isOrdinal()) {\n          x -= this._barWidth / 2;\n        }\n        if (this.isOrdinal() && this._gap !== undefined) {\n          x += this._gap / 2;\n        }\n        const position = (this._barWidth / barlist.length) * barIndex;\n        return utils.safeNumber(x + position);\n      })\n      .attr('y', (d: any) => {\n        let yVal;\n        if (d.y0 !== undefined) {\n          yVal = y(d.y + d.y0);\n          if (d.y < 0) {\n            yVal -= this.barHeight(y, d);\n          }\n        } else {\n          yVal = y(d.y);\n        }\n        return utils.safeNumber(yVal);\n      })\n      .attr('width', this._barWidth / barlist.length)\n      .attr('height', (d: any) => this.barHeight(y, d))\n      .attr('fill', pluck('layer', option.color ? (d: any, i: number) => {\n        if (option.stacks) {\n          const index = option.stacks.indexOf(d);\n          return option.color[index];\n        } else {\n          return option.color;\n        }\n      } : this.getColor))\n      .select('title').text(pluck('data', this.title(data.name)));\n\n    if (this.multiOption.onClick) {\n      // @ts-ignore\n      bars.on('click', (d: any) => this.multiOption.onClick(d, event));\n    }\n\n    transition(bars, this.transitionDuration(), this.transitionDelay())\n      .attr('x', d => {\n        let x = this.x()(d.x);\n        if (this._centerBar && !this.isOrdinal()) {\n          x -= this._barWidth / 2;\n        }\n        if (this.isOrdinal() && this._gap !== undefined) {\n          x += this._gap / 2;\n        }\n        const position = (this._barWidth / barlist.length) * barIndex;\n        return utils.safeNumber(x + position);\n      })\n      .attr('y', d => {\n        let yVal;\n        if (d.y0 !== undefined) {\n          yVal = y(d.y + d.y0);\n          if (d.y < 0) {\n            yVal -= this.barHeight(y, d);\n          }\n        } else {\n          yVal = y(d.y);\n        }\n        return utils.safeNumber(yVal);\n      })\n      .attr('width', this._barWidth / barlist.length)\n      .attr('height', d => this.barHeight(y, d))\n      .attr('fill', pluck('layer', option.color ? (d: any, i: number) => {\n        if (option.stacks) {\n          const index = option.stacks.indexOf(d);\n          return option.color[index];\n        } else {\n          return option.color;\n        }\n      } : this.getColor))\n      .select('title').text(pluck('data', this.title(data.name)));\n  }\n\n  private stepLine(layersEnter: any, layers: any, y: any, option: any) {\n    let bandwidth = 0;\n    if (this.x().bandwidth) {\n      bandwidth = this.x().bandwidth() / 2;\n    }\n\n    const line = d3.line()\n      .x((d: any) => (this.x()(d.x) + bandwidth))\n      .y((d: any) => y ? y(d.y) : this.y()(d.y))\n      .curve(d3.curveStepAfter);\n\n    if (this._defined) {\n      line.defined(this._defined);\n    }\n\n    const path = layersEnter.append('path').attr('class', 'line').attr('stroke', option.color ? option.color : this.colors2.bind(this));\n\n    if (option.dashStyle) {\n      path.attr('stroke-dasharray', option.dashStyle);\n    }\n    transition(layers.select('path.line'), this.transitionDuration(), this.transitionDelay())\n      .attr('stroke', option.color ? option.color : this.colors2.bind(this))\n      .attr('d', d => this.safeD(line(d.values)))\n      .style('stroke-width', option.lineWidth + 'px');\n  }\n\n  symbol(type?: any) {\n    if (!type) {\n      return this._symbol.type();\n    }\n    this._symbol.type(type);\n    return this;\n  }\n\n  excludedColor(excludedColor?: any) {\n    if (!excludedColor) {\n      return this._excludedColor;\n    }\n    this._excludedColor = excludedColor;\n    return this;\n  }\n\n  excludedOpacity(excludedOpacity?: any) {\n    if (!excludedOpacity) {\n      return this._excludedOpacity;\n    }\n    this._excludedOpacity = excludedOpacity;\n    return this;\n  }\n\n  private resizeSymbolsWhere(condition: any, size: any) {\n    // @ts-ignore\n    const symbols = this.selectAll('.chart-body path.symbol').filter(() => condition(d3.select(this)));\n    const oldSize = this._symbol.size();\n    this._symbol.size(Math.pow(size, 2));\n\n    // @ts-ignore\n    transition(symbols, this.transitionDuration(), this.transitionDelay()).attr('d', this._symbol);\n    this._symbol.size(oldSize);\n  }\n\n  extendBrush() {\n    const extent = this.brush().extent();\n    if (this.round()) {\n      extent[0] = extent[0].map(this.round());\n      extent[1] = extent[1].map(this.round());\n      this.g().select('.brush').call(this.brush().extent(extent));\n    }\n    return extent;\n  }\n\n  brushIsEmpty(extent: any) {\n    return this.brush().empty() || !extent || extent[0][0] >= extent[1][0] || extent[0][1] >= extent[1][1];\n  }\n\n  _brushing() {\n    const extent = this.extendBrush();\n    this.redrawBrush(this.g());\n    if (this.brushIsEmpty(extent)) {\n      events.trigger(() => {\n        this.filter(null);\n        this.redrawGroup();\n      });\n    } else {\n      const ranged2DFilter = filters.RangedTwoDimensionalFilter(extent);\n      events.trigger(() => {\n        this.filter(null);\n        this.filter(ranged2DFilter);\n        this.redrawGroup();\n      }, constants.EVENT_DELAY);\n    }\n  }\n\n  private getTooltipElem() {\n    if (!this._tooltip || this._tooltip.empty()) {\n      this._tooltip  = d3.select('body')\n        .append('div')\n        .attr('class', 'wise-chart-tooltip')\n        .html('')\n        .style('opacity', 0)\n        .style('position', 'absolute')\n        .style('z-index', -1);\n    }\n    return this._tooltip;\n  }\n}\n","\nimport {DcChart} from '../base/dc-chart';\nimport {DjChartOption} from '../class/dj-chart-option';\nimport {CloudChart} from './cloud-chart';\nimport {MultiChart} from './multi-chart';\n\nexport class DjChart extends DcChart {\n  private option:DjChartOption;\n\n  constructor(option: DjChartOption) {\n    super();\n    this.option = option;\n  }\n\n  cloudChart(element: Element) {\n    return new CloudChart(element, this.option);\n  }\n\n  multiChart(element: Element) {\n    const chart = new MultiChart(element, this.option);\n    return chart['anchor'](element);\n  }\n\n}\n","import {Component, ElementRef, EventEmitter, Input, NgZone, OnInit, Output} from '@angular/core';\nimport {DjChart} from './chart/dj-chart';\nimport {DjChartOption} from './class/dj-chart-option';\nimport * as d3 from 'd3';\nimport moment from 'moment';\nimport {transition} from 'dc';\nimport {isArray} from 'rxjs/internal-compatibility';\n\n@Component({\n  selector: 'dj-chart',\n  template: ``,\n  styleUrls: ['./dj-angular-chart.component.scss']\n})\nexport class DjAngularChartComponent implements OnInit {\n\n  djChart?: DjChart;\n\n  observer: ResizeObserver | undefined;\n  domWidth: number | undefined;\n  resizeDelay = 300;\n  resizeTimer: any;\n\n  chart: any;\n  axisOption?: any;\n  wiseChart?: any;\n  width?: any;\n  height?: any;\n  _tooltip?: any;\n\n  _option?: DjChartOption;\n  @Input('option')\n  set option(option:DjChartOption) {\n    if (option.type === 'composite') {\n      option.setAxisOption();\n    }\n\n    this.wiseChart = new DjChart(option);\n    this._option = option;\n\n    switch (option.type) {\n      case 'pieChart':\n        this.chart = this.wiseChart.pieChart(this.elRef.nativeElement);\n        this.setPieChart();\n        break;\n      case 'cloudChart':\n        this.chart = this.wiseChart.cloudChart(this.elRef.nativeElement);\n        this.setCloudChart();\n        break;\n      case 'dcChart':\n        this.setDcChart();\n        break;\n      default:\n        this.chart = this.wiseChart.seriesChart(this.elRef.nativeElement);\n        this.setMultiSeries();\n        break;\n    }\n\n    this.chart.render();\n    this.rendered.emit(this.chart);\n  }\n  get option() {\n    // @ts-ignore\n    return this._option;\n  }\n\n  @Output() changFilter: EventEmitter<any> = new EventEmitter<any>();\n  @Output() rendered: EventEmitter<any> = new EventEmitter<any>();\n\n\n  constructor(\n    private elRef: ElementRef,\n    private zone: NgZone\n  ) {}\n\n  ngOnInit() {\n    // init document width\n    this.domWidth = this.elRef.nativeElement.clientWidth;\n    // element 사이즈가 변경되었을때\n    this.observer = new ResizeObserver(entries => {\n      this.zone.runOutsideAngular(() => {\n        // resize duration: this.resizeDelay\n        const width = entries[0].contentRect.width;\n        clearTimeout(this.resizeTimer);\n        this.resizeTimer = setTimeout(() => {\n          if (this.domWidth !== width) {\n            this.domWidth = width;\n\n            // redraw\n            if (this.chart) {\n              this.chart.minWidth(100);\n              this.chart.minHeight(50);\n              this.chart.width(0);\n              this.chart.height(0);\n              if (this.chart.rescale) {\n                this.chart.rescale();\n              }\n              if (this.chart.update) {\n                this.chart.update();\n              } else {\n                this.chart.redraw();\n              }\n            }\n          }\n        }, this.resizeDelay);\n\n      });\n    });\n\n    this.observer.observe(this.elRef.nativeElement);\n  }\n\n\n  ngOnDestroy() {\n    // 생성된 tooltip 제거\n    if (this._tooltip) {\n      this._tooltip.remove();\n    }\n    if (this.chart.children) {\n      this.chart.children().forEach((chart: any) => {\n        if (chart._tooltip) {\n          chart._tooltip.remove();\n        }\n      });\n    }\n\n    // @ts-ignore\n    this.observer.unobserve(this.elRef.nativeElement);\n  }\n\n\n  create() {\n    this.setWidthHeight();\n    this.setMargins();\n\n    // input type이 crossfilter와 data일때 처리\n    if (this.option.data !== undefined) {\n      this.chart.dimension(this.filter());\n      this.chart.group({all: () => this.option.data, size: () => this.option.data.length});\n    } else {\n      this.chart.dimension(this.option.dimension);\n      this.chart.group(this.option.group);\n    }\n\n    const overrideFields = ['onClick'];\n    overrideFields.forEach(key => {\n      // @ts-ignore\n      if (this.option[key] !== undefined) {\n        if (key === 'onClick') {\n          // @ts-ignore\n          this.chart[key] = (d: any) => this.option.onClick(d, event);\n        } else {\n          // @ts-ignore\n          this.chart[key] = this.option[key];\n        }\n      }\n    });\n\n    if (this.option.onClickEvent) {\n      this.chart['_onClickEvent'] = this.chart.onClick;\n      this.chart['onClick'] = (d: any) => {\n        this.chart._onClickEvent(d);\n        this.option.onClickEvent(d);\n      };\n    }\n\n    if (this.option.onFilterChanged) {\n      // @ts-ignore\n      this.chart.on('filtered', (d: any) => this.option.onFilterChanged(d));\n    }\n\n    this.option['chart'] = this.chart;\n  }\n\n  private setPieChart() {\n    this.create();\n    const _innerRadius = this.option.innerRadius || 30;\n    const _radius = this.option.radius || 80;\n    const _externalLabels = this.option.externalLabels || 0;\n    const size = d3.min([+this.width, +this.height]);\n\n    this.chart\n      // @ts-ignore\n      .radius((size / 2) * (_radius / 100))\n      // @ts-ignore\n      .innerRadius((size / 2) * (_innerRadius / 100))\n      .externalLabels(_externalLabels)\n      .drawPaths(true);\n\n    if (this.option.slicesPercent) {\n      let data = this.option.data ? this.option.data : this.option.group.all();\n      data = data.sort((a: any, b: any) => b.value - a.value);\n      let sum = 0;\n      let index = 0;\n      data.forEach((d: any) => sum += d.value);\n      while (index < data.length) {\n        const percent = (data[index].value / sum) * 100;\n        if (percent < this.option.slicesPercent) {\n          break;\n        }\n        index++;\n      }\n\n      this.chart.slicesCap(index);\n    }\n\n    if (this.option.slicesCap) {\n      this.chart.slicesCap(this.option.slicesCap);\n    }\n\n    if (this.option.colors) {\n      this.chart.colors((d: any) => {\n        const key = isArray(d) ? d[0] : d;\n        // @ts-ignore\n        return this.option.colors[key] || '#ccc';\n      });\n    }\n\n    this.chart.on('pretransition', (chart: any) => {\n      chart.selectAll('text.pie-slice').text((d: any) => {\n        let key = d.data.key;\n        const angle = d.endAngle - d.startAngle;\n        if (this.option.legends) {\n          key = this.option.legends[key] || key;\n        }\n\n        if (angle > 0.5 || (angle > 0.5 && _externalLabels)) {\n          return key;\n        }\n        return '';\n      });\n\n      if (this.option.tooltip) {\n        const tooltip = this.getTooltipElem();\n        chart.selectAll('title').remove();\n        chart.selectAll('g.pie-slice')\n          .on('mousemove', (data: any) => {\n            const key = isArray(data.data.key) ? data.data.key[0] : data.data.key;\n            const color = this.option.colors ? this.option.colors[key] : this.chart.getColor(data.data);\n            // @ts-ignore\n            const pageX = event.pageX;\n            // @ts-ignore\n            const pageY = event.pageY;\n            let left = 0, top = 0;\n\n            tooltip.transition()\n              .duration(100)\n              .style('opacity', .9)\n              .style('background', color)\n              .style('border-color', color)\n              .style('z-index', 10000);\n            tooltip.html(this.option.tooltip(data));\n\n            setTimeout(() => {\n              const toolX = tooltip.node().clientWidth;\n              const toolY = tooltip.node().clientHeight;\n              top = pageY - toolY - 20;\n              left = pageX - (toolX / 2);\n\n              tooltip\n                .style('top', top + 'px')\n                .style('left', left + 'px');\n            });\n          })\n          .on('mouseout', (data: any) => {\n            tooltip .transition()\n              .duration(300)\n              .style('opacity', 0)\n              .style('z-index', -1);\n          });\n\n        /*symbols\n          */\n\n      }\n    });\n  }\n\n  private setDcChart() {\n    // @ts-ignore\n    this.chart = this.wiseChart[this.option.dcChart](this.elRef.nativeElement);\n    this.create();\n\n    Object.keys(this.option).forEach(key => {\n      if (this.chart[key]) {\n        // @ts-ignore\n        this.chart[key](this.option[key]);\n      }\n    });\n  }\n\n  private setCloudChart() {\n    this.create();\n    this.chart.padding(this.option.padding);\n    this.chart.legends(this.option.legends);\n  }\n\n  private setMargins() {\n    if (this.option.margins) {\n      this.chart.margins().left = this.option.margins.left !== undefined ? +this.option.margins.left : 30;\n      this.chart.margins().right = this.option.margins.right !== undefined ? +this.option.margins.right : 50;\n      this.chart.margins().bottom = this.option.margins.bottom !== undefined ? +this.option.margins.bottom : 30;\n      this.chart.margins().top = this.option.margins.top !== undefined ? +this.option.margins.top : 10;\n    }\n  }\n\n  private setMultiSeries() {\n    this.create();\n\n    let min = d3.min(this.chart.group().all(), (d: any) => +d.key[1]) || 0;\n    let max = d3.max(this.chart.group().all(), (d: any) => +d.key[1]);\n    const subChart = (c: any) => {\n      return this.wiseChart.multiChart(c);\n    };\n\n\n    const rightYAxisWidth = 0;\n    let leftYAxisWidth = 30;\n    this.chart\n      .chart(subChart)\n      .renderHorizontalGridLines(true)\n      .renderVerticalGridLines(true)\n      // @ts-ignore\n      .x(d3.scaleLinear().domain([min, max]))\n      .yAxisLabel(this.option.axisOption && this.option.axisOption.length ? this.option.axisOption[0].axisLabel : this.option.yAxisLabel)\n      .xAxisLabel(this.option.xAxisLabel)\n      .clipPadding(5)\n      .elasticY(false)\n      .mouseZoomable(false)\n      .brushOn(false)\n      .seriesAccessor((d: any) => d.key[0])\n      .seriesSort((a: any, b: any) => {\n        const orderList = this.option.axisOption.map((d: any) => d.series);\n        return orderList.indexOf(a) - orderList.indexOf(b);\n      })\n      .keyAccessor((d: any) => {\n        return d.key ? isNaN(d.key[1]) ? d.key[1] : +d.key[1] : null;\n      })\n      .valueAccessor((d: any) => d.value);\n\n    // set lef y axis\n    this.setLeftYAxis();\n\n    // xAxis\n    if (this.option.xAxisOption) {\n      if (this.option.xAxisOption.domain) {\n        min = this.option.xAxisOption.domain[0];\n        max = this.option.xAxisOption.domain[1];\n      }\n      switch (this.option.xAxisOption.type) {\n        case 'ordinal':\n          this.chart.x(d3.scaleBand()).xUnits(this.wiseChart.units.ordinal).domain([min, max]);\n          break;\n        case 'date':\n          if (this.option.xAxisOption.domain) {\n            min = moment(min, this.option.xAxisOption.dateFormat).valueOf();\n            max = moment(max, this.option.xAxisOption.dateFormat).valueOf();\n          }\n          // @ts-ignore\n          this.chart.x(d3.scaleTime().domain([new Date(min), new Date(max)]));\n          if (this.option.xAxisOption.dateTickFormat) {\n            // @ts-ignore\n            this.chart.xAxis().tickFormat((d: any) => moment(d).format(this.option.xAxisOption.dateTickFormat));\n          }\n          break;\n        default:\n          // @ts-ignore\n          this.chart.x(d3.scaleLinear().domain([min, max]));\n          break;\n      }\n\n      if (this.option.xAxisOption.ticks) {\n        this.chart.xAxis().ticks(this.option.xAxisOption.ticks);\n      }\n      if (this.option.xAxisOption.tickFormat) {\n        this.chart.xAxis().tickFormat(this.option.xAxisOption.tickFormat);\n      }\n\n      this.chart.xAxisLabel(this.option.xAxisOption.axisLabel);\n    }\n\n    // series sort\n    if (this.option.order) {\n      this.chart.seriesSort((a: string, b: string) => {\n        const order = this.option.order;\n        const before = order.indexOf(a);\n        const after = order.indexOf(b);\n        return before - after;\n      });\n    }\n\n    // renderlet\n    this.chart['renderOn'] = (chart: any) => {\n      if (this.option.highlight) {\n        this.renderHighlight(chart);\n      }\n    };\n\n    // update\n    this.chart['update'] = () => {\n      let rightWidth = 0;\n      this.chart.redraw();\n      this.setLeftYAxis();\n\n      setTimeout(() => {\n        this.option.axisOption.forEach((v: any, i: any) => {\n          if (i && !v.hide) {\n            rightWidth += +v.width ? +v.width : 0;\n          }\n        });\n        // right yAxis 2개 이상부터 35씩 추가\n        // @ts-ignore\n        if (this.option.yAxisOptions.length > 2) {\n          // @ts-ignore\n          rightWidth += (this.option.yAxisOptions.length - 2) * 35;\n        }\n\n        if (this.option.elasticRightMargin) {\n          this.chart.margins().right = this.chart.marginRight + rightWidth;\n        } else {\n          this.chart.margins().right = this.chart.marginRight;\n        }\n\n\n        // left yAxis 의 width 구하기\n        if (this.option.elasticLeftMargin) {\n          leftYAxisWidth = this.chart.svg().selectAll('.axis.y')._groups[0][0].getBoundingClientRect().width + 20;\n          this.chart.margins().left = this.option.axisOption[0].axisLabel || this.option.yAxisLabel ? leftYAxisWidth : this.chart.margins().left;\n        }\n\n        // left margin 영역 만큼 chart g 이동\n        const chartBodys = this.chart.g().selectAll('g.chart-body');\n        const gridLines = this.chart.g().selectAll('g.grid-line');\n        const highlight = this.chart.g().selectAll('g.highlight');\n        transition(chartBodys, this.chart.transitionDuration(), this.chart.transitionDelay())\n          .attr('transform', `translate(${this.chart.margins().left}, ${this.chart.margins().top})`);\n        transition(gridLines, this.chart.transitionDuration(), this.chart.transitionDelay())\n          .attr('transform', `translate(${this.chart.margins().left}, ${this.chart.margins().top})`);\n        transition(highlight, this.chart.transitionDuration(), this.chart.transitionDelay())\n          .attr('transform', `translate(${this.chart.margins().left}, ${this.chart.margins().top})`);\n\n\n        setTimeout(() => {\n          this.chart.redraw();\n        });\n      }, 500);\n    };\n\n    // redraw change\n    this.chart['_redraw'] = this.chart.redraw;\n    this.chart['_redraw'] = this.chart.redraw;\n    this.chart['redraw'] = () => {\n      this.chart._redraw();\n      this.chart.renderOn(this.chart);\n    };\n\n\n    // render change\n    this.chart['_render'] = this.chart.render;\n    this.chart.render = () => {\n      this.chart['marginRight'] = this.chart.margins().right;\n      this.chart._render();\n\n      setTimeout(() => {\n        this.chart.update();\n      }, 300);\n    };\n  }\n\n  private setLeftYAxis() {\n    const axisOption = this.option.axisOption;\n    if (axisOption && axisOption[0]) {\n      let domain;\n      const leftOption = axisOption[0];\n      // domain\n      if (axisOption && axisOption.length && leftOption.domain) {\n        domain = leftOption.domain;\n      } else {\n        if (this.chart.group().all().length) {\n\n          domain = [\n            // @ts-ignore\n            d3.min(this.chart.group().all(),\n              (d: any) => typeof d.value === 'object' ? d.value.value : d.value) + (this.option.gap ? - this.option.gap : 0\n            ),\n            d3.max(this.chart.group().all(),\n              (d: any) => typeof d.value === 'object' ? d.value.value : d.value) + (this.option.gap ? this.option.gap : 0\n            )\n          ];\n        } else {\n          domain = [0, 100];\n        }\n      }\n      this.chart.y(d3.scaleLinear().domain(domain ? domain : [0, 100]));\n\n      // tickformat\n      if (leftOption.tickFormat) {\n        this.chart.yAxis().tickFormat(leftOption.tickFormat);\n      } else if (leftOption.prevTickText || leftOption.nextTickText) {\n        const tickFormat = (d: any) => {\n          let tick = '';\n          if (leftOption.prevTickText) {\n            tick += leftOption.prevTickText;\n          }\n          tick += this.commaSeparateNumber(d) || 0;\n          if (leftOption.nextTickText) {\n            tick += leftOption.nextTickText;\n          }\n\n          return tick;\n        };\n        this.chart.yAxis().tickFormat(tickFormat);\n      } else {\n        this.chart.yAxis().tickFormat((d: any) => this.commaSeparateNumber(d) || 0);\n      }\n\n      // label\n      if (leftOption.axisLabel) {\n        this.chart.yAxisLabel(leftOption.axisLabel);\n      }\n    } else {\n      this.chart.y(d3.scaleLinear().domain([0, 100]));\n    }\n  }\n\n  private setWidthHeight() {\n    this.width = this.option.width ? this.option.width : this.elRef.nativeElement.clientWidth || 200;\n    this.height = this.option.height ? this.option.height : this.elRef.nativeElement.clientHeight || 400;\n\n    this.chart\n      .width(this.width)\n      .height(this.height);\n  }\n\n  private filter() {\n    if (!this.option.filters) {\n      this.option['filters'] = [];\n    }\n\n    return {\n      filter: (d: any) => {\n        this.option.filters = this.getFilters();\n        this.changFilter.emit();\n      },\n      filterExact: (d: any) => {\n        this.option.filters = this.getFilters();\n        this.changFilter.emit();\n      },\n      filterFunction: (d: any, e: any) => {\n        this.option.filters = this.getFilters();\n        this.changFilter.emit();\n      }\n    };\n  }\n\n  private getFilters() {\n    const filters =  this.chart.filters().map((d: any) => {\n      if (Array.isArray(d)) {\n        return d[0];\n      } else {\n        return d;\n      }\n    });\n    return filters;\n  }\n\n  private getTooltipElem() {\n    if (!this._tooltip || this._tooltip.empty()) {\n      this._tooltip  = d3.select('body')\n        .append('div')\n        .attr('class', 'wise-chart-tooltip')\n        .html('')\n        .style('opacity', 0)\n        .style('position', 'absolute')\n        .style('z-index', 10000);\n    }\n    return this._tooltip;\n  }\n\n  private renderHighlight (chart: any) {\n    const g = chart.g();\n\n    let highlight = g.selectAll('g.highlight');\n    if (highlight.empty()) {\n      highlight = g.insert('g', ':first-child')\n        .attr('class', 'highlight')\n        .attr('transform', `translate(${this.chart.margins().left},${this.chart.margins().top})`);\n    }\n\n    const sections = highlight.selectAll('rect.section').data(this.option.highlight);\n    sections.enter()\n      .append('rect')\n      .attr('class', (d: any, i: number) => `section _${i}`)\n      .attr('fill', (d: any) => d.color || 'blue')\n      .attr('fill-opacity', (d: any) => d.opacity || .3)\n      .attr('stroke', '#fff')\n      .attr('x', (d: any) => {\n        const domain = d.domain;\n        let x0;\n        // @ts-ignore\n        if (this.option.xAxisOption.type === 'date') {\n          // @ts-ignore\n          const dateFormat = this.option.xAxisOption.dateFormat;\n          if (domain[0].valueOf) {\n            x0 = domain[0].valueOf();\n          } else {\n            x0 = moment(domain[0], dateFormat).valueOf();\n          }\n        } else {\n          x0 = domain[0];\n        }\n        return this.chart.x()(x0);\n      })\n      .attr('y', 0)\n      .attr('height', this.chart.yAxisHeight())\n      .attr('width', (d: any) => {\n        const domain = d.domain;\n        let x0, x1;\n\n        // @ts-ignore\n        if (this.option.xAxisOption.type === 'date') {\n          // @ts-ignore\n          const dateFormat = this.option.xAxisOption.dateFormat;\n          x0 = moment(domain[0], dateFormat).valueOf();\n          x1 = moment(domain[1], dateFormat).valueOf();\n        } else {\n          x0 = domain[0];\n          x1 = domain[1];\n        }\n        const x = this.chart.x()(x0);\n        return this.chart.x()(x1) - x;\n      });\n\n    transition(sections, this.chart.transitionDuration(), this.chart.transitionDelay())\n      .attr('fill', d => d.color || 'blue')\n      .attr('fill-opacity', d => d.opacity || .3)\n      .attr('stroke', '#fff')\n      .attr('x', d => {\n        const domain = d.domain;\n        let x0;\n        // @ts-ignore\n        if (this.option.xAxisOption.type === 'date') {\n          // @ts-ignore\n          const dateFormat = this.option.xAxisOption.dateFormat;\n          x0 = moment(domain[0], dateFormat).valueOf();\n        } else {\n          x0 = domain[0];\n        }\n        return this.chart.x()(x0);\n      })\n      .attr('width', d => {\n        const domain = d.domain;\n        let x0, x1;\n\n        // @ts-ignore\n        if (this.option.xAxisOption.type === 'date') {\n          // @ts-ignore\n          const dateFormat = this.option.xAxisOption.dateFormat;\n          x0 = moment(domain[0], dateFormat).valueOf();\n          x1 = moment(domain[1], dateFormat).valueOf();\n        } else {\n          x0 = domain[0];\n          x1 = domain[1];\n        }\n        const x = this.chart.x()(x0);\n        return this.chart.x()(x1) - x;\n      });\n\n    transition(sections.exit(), this.chart.transitionDuration(), this.chart.transitionDelay()).attr('opacity', 0).remove();\n  }\n\n  private commaSeparateNumber (value?: any) {\n    if (!value) {\n      return '';\n    }\n    while (/(\\d+)(\\d{3})/.test(value.toString())) {\n      value = value.toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1,');\n    }\n    return value;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { DjAngularChartComponent } from './dj-angular-chart.component';\n\n\n@NgModule({\n  declarations: [\n    DjAngularChartComponent,\n  ],\n  imports: [\n  ],\n  exports: [\n    DjAngularChartComponent,\n  ]\n})\nexport class DjAngularChartModule { }\n","import * as d3 from 'd3';\n\nexport class AxisOption {\n\n  axisLabel?: string;\n  color?: string;\n  domain?: number[];\n  hide?: boolean;\n  series?: any;\n  errorBar?: any;\n  type?: any;\n  size?: any;\n  tickFormat?: any;\n  ticks?: any;\n  renderArea?: any;\n  smooth?: any;\n  dashStyle?: any;\n  lineWidth?: any;\n\n  constructor(fields?: any) {\n    const fieldList = ['axisLabel', 'color', 'domain', 'hide', 'series', 'errorBar', 'type', 'size', 'tickFormat',\n      'ticks', 'renderArea', 'smooth', 'dashStyle', 'lineWidth'];\n    fieldList.forEach(key => {\n      if (fields[key] !== undefined) {\n        // @ts-ignore\n        this[key] = fields[key];\n      }\n    });\n  }\n\n  setDomain(data: Array<any>) {\n    // @ts-ignore\n    this.domain = [d3.min(data, d => d.value), d3.max(data, d => d.value)];\n  }\n\n  setAxisLabel(axisLabel: string) {\n    this.axisLabel = axisLabel;\n  }\n}\n","import * as _moment from 'moment';\r\nimport * as d3 from 'd3';\r\nimport * as _ from 'lodash';\r\nimport {AxisOption} from './axis-option';\r\nimport {DcChart} from '../base/dc-chart';\r\nconst moment = _moment;\r\n\r\nenum DjChartType {\r\n  PIE_CHART = 'pieChart',\r\n  CLOUD_CHART = 'cloudChart',\r\n  COMPOSITE = 'composite',\r\n  HEATMAP = 'heatmap',\r\n  DC_CHART = 'dcChart',\r\n  STACKED_BAR = 'stackedBar'\r\n}\r\n\r\nenum AxisOptionType {\r\n  DATE = 'date', // x축이 date 타입일때 지정\r\n  LINEAR = 'linear', // x축이 number 속성으로 range 표기가 필요할때 지정, domain 옵션 필요\r\n  ORDINAL = 'ordinal' // x축을 있는 그대로 표기할때 사용\r\n}\r\n\r\ninterface BasicAxisOption {\r\n  axisLabel: string; // x축에 표기될 label 설정\r\n  domain: Array<number>; // 제외 가능하며 제외시 value 의 min, max\r\n  prevTickText: string; // tick의 앞쪽에 나타날 문자를 지정 tickFormat 지정시 tickFormat 우선\r\n  nextTickText: string; // tick의 뒤쪽에 나타날 문자를 지정 tickFormat 지정시 tickFormat 우선\r\n  tickFormat: (value: any, index?: any, size?: any) => string; // tick 표기를 변경하고 싶을때 사용 해당옵션 적용시 최우선으로 적용\r\n  ticks: number; // x축에 몇개의 tick을 표기할지 설정\r\n}\r\n\r\ninterface XAxisOption extends BasicAxisOption {\r\n  type: AxisOptionType;\r\n  dateFormat: string; // type이 date 일때 필요 하며 data의 date format 형식 ex) YYYYMMDD\r\n  dateTickFormat: string; // type이 date 일때 필요 chart의 x축에 표기될 형식\r\n}\r\n\r\ninterface YAxisOption extends BasicAxisOption {\r\n  keys: Array<string>; // data의 key를 group 하여 축에 표기 [\"itemLarge/top\", \"itemLarge/bottom\", \"itemLarge/sportswear\"]\r\n  size: number; // seriesType 에 symbole이 포함되어 있을때 symbole의 크기\r\n  divideFactor: number;\r\n}\r\n\r\ninterface ChartOption {\r\n  data?: Array<any>;\r\n  type?: DjChartType;\r\n  onClick?: (data: any, event: any) => void;\r\n  onClickEvent?: any;\r\n  onFilterChanged?: (chart: any) => void;\r\n  legends?: { [key: string]: string; };\r\n  colors?: { [key: string]: string; };\r\n  seriesTypes?: { [key: string]: string; };\r\n  yAxisOptions?: Array<YAxisOption>;\r\n  yAxisLabel?: string;\r\n  xAxisOption?: XAxisOption;\r\n  xAxisLabel?: string;\r\n  dimension?: any;\r\n  group?: any;\r\n  tooltip?: any;\r\n  seriesOptions?:  {\r\n    [key: string]: {\r\n      renderArea: boolean; // default: false\r\n      smooth: boolean; // default: false\r\n      lineWidth: number; // default: 1.5, 선 굵기\r\n      dashStyle: string; // default: null\r\n      /*\r\n      * (선, 공백) repeat\r\n      * (5, 3, 2, 3) 이런식으로 가능\r\n      */\r\n    };\r\n  };\r\n  margins?: any;\r\n  highlight?: Array<{\r\n    domain: Array<any>; // [min, max]\r\n    color: string; // default: blue\r\n    label: string; // default: '',  highlight label\r\n    opacity: number; // (0~1, default: .3): 투명도\r\n  }>;\r\n  elasticLeftMargin: boolean;\r\n  elasticRightMargin: boolean;\r\n  innerRadius?: number;\r\n  externalLabels?: number;\r\n  slicesCap?: number;\r\n  slicesPercent?: number;\r\n  radius?: number;\r\n  padding?: any;\r\n}\r\n\r\nexport class DjChartOption {\r\n  data: any;\r\n  type?: DjChartType;\r\n  dcChart?: DcChart;\r\n  legends?: { [key: string]: string; };\r\n  colors?: { [key: string]: string; };\r\n  slicesCap?: number;\r\n  slicesPercent?: number;\r\n  radius?: number;\r\n  externalLabels?: number;\r\n  innerRadius?: number;\r\n  padding?: any;\r\n  seriesTypes?: { [key: string]: string; };\r\n  seriesOptions?:  {\r\n    [key: string]: {\r\n      renderArea: boolean; // default: false\r\n      smooth: boolean; // default: false\r\n      lineWidth: number; // default: 1.5, 선 굵기\r\n      dashStyle: string; // default: null\r\n      /*\r\n      * (선, 공백) repeat\r\n      * (5, 3, 2, 3) 이런식으로 가능\r\n      */\r\n    };\r\n  };\r\n  yAxisOptions?: Array<YAxisOption>;\r\n  yAxisLabel?: string;\r\n  xAxisOption?: XAxisOption;\r\n  xAxisLabel?: string;\r\n  onClick?: (data: any, event: any) => void;\r\n  onFilterChanged?: (chart: any) => void;\r\n  onClickEvent?: any;\r\n  dimension?: any;\r\n  group?: any;\r\n  tooltip?: any;\r\n  highlight?: Array<{\r\n    domain: Array<any>; // [min, max]\r\n    color: string; // default: blue\r\n    label: string; // default: '',  highlight label\r\n    opacity: number; // (0~1, default: .3): 투명도\r\n  }>;\r\n  elasticLeftMargin = true;\r\n  elasticRightMargin = true;\r\n\r\n  chart: any;\r\n  gap: any;\r\n  order: any;\r\n  height: any;\r\n  width: any;\r\n  margins: any;\r\n  axisOption: any;\r\n  filters: any;\r\n  private _legendObj?: any = {};\r\n\r\n  constructor(chartOption?: any) {\r\n    const defaultOption = {\r\n      cloudChart: ['type', 'onClick', 'onClickEvent', 'onFilterChanged', 'legends', 'colors', 'padding', 'dimension', 'group', 'tooltip'],\r\n      pieChart: ['type', 'onClick', 'onClickEvent', 'onFilterChanged', 'legends', 'colors', 'slicesCap', 'slicesPercent', 'radius',\r\n        'externalLabels', 'innerRadius', 'dimension', 'group', 'tooltip'],\r\n      composite: ['type', 'onClick', 'onClickEvent', 'onFilterChanged', 'legends', 'colors', 'seriesTypes', 'yAxisOptions', 'yAxisLabel',\r\n        'xAxisOption', 'xAxisLabel', 'dimension', 'group', 'tooltip', 'seriesOptions', 'margins', 'highlight', 'elasticLeftMargin',\r\n        'elasticRightMargin']\r\n    };\r\n\r\n    if (chartOption && chartOption.type) {\r\n      // @ts-ignore\r\n      if (defaultOption[chartOption.type]) {\r\n        // @ts-ignore\r\n        defaultOption[chartOption.type].forEach(field => {\r\n          // @ts-ignore\r\n          if (chartOption[field] !== undefined) {\r\n            // @ts-ignore\r\n            this[field] = chartOption[field];\r\n          }\r\n        });\r\n      }\r\n\r\n      if (chartOption.type === DjChartType.DC_CHART) {\r\n        Object.keys(chartOption).forEach(key => {\r\n          // @ts-ignore\r\n          this[key] = chartOption[key];\r\n        });\r\n      }\r\n\r\n      if (chartOption.data) {\r\n        this.setData(chartOption.data);\r\n      }\r\n    }\r\n  }\r\n\r\n  setData(data?: Array<any>) {\r\n    if (this.type === DjChartType.COMPOSITE && this.xAxisOption && this.xAxisOption.type === 'date') {\r\n      this.data = data;\r\n      this.data.forEach((d: any) => {\r\n        // @ts-ignore\r\n        d.key[1] = moment(d.key[1], this.xAxisOption.dateFormat).toDate();\r\n      });\r\n    } else {\r\n      this.data = data;\r\n    }\r\n  }\r\n\r\n  setAxisOption() {\r\n    if (this.yAxisOptions) {\r\n      let data: Array<any>;\r\n      const seriesTypes = this.seriesTypes || {};\r\n      const axisOption: Array<any> = [];\r\n      if (this.data !== undefined) {\r\n        data = this.data;\r\n      } else {\r\n        data = this.group().all();\r\n      }\r\n\r\n      this.yAxisOptions.forEach(axis => {\r\n        // @ts-ignore\r\n        const filterData = data.filter((d: any) => {\r\n          if (axis.keys.indexOf(d.key[0]) > -1) {\r\n            return true;\r\n          }\r\n        });\r\n        const max = d3.max(filterData, d => d.value);\r\n        const min = d3.min(filterData, d => d.value) || 0;\r\n\r\n        axis.keys.forEach((key, i) => {\r\n          const _option = <AxisOption><unknown>{\r\n            axisLabel: axis.axisLabel,\r\n            domain: axis.domain ? axis.domain : [min, max],\r\n            hide: i,\r\n            series: key,\r\n            type: seriesTypes[key] || 'line',\r\n            size: axis.size || 6,\r\n          };\r\n\r\n          if (this.seriesOptions && this.seriesOptions[key]) {\r\n            Object.keys(this.seriesOptions[key]).forEach(op => {\r\n              // @ts-ignore\r\n              _option[op] = this.seriesOptions[key][op];\r\n            });\r\n          }\r\n\r\n          if (this.colors && this.colors[key]) {\r\n            _option['color'] = this.colors[key];\r\n          }\r\n          if (axis.prevTickText || axis.nextTickText) {\r\n            _option['tickFormat'] = (d: any) => {\r\n              let tick = '';\r\n              if (axis.prevTickText) {\r\n                tick += axis.prevTickText;\r\n              }\r\n              tick += this.commaSeparateNumber(d) || 0;\r\n              if (axis.nextTickText) {\r\n                tick += axis.nextTickText;\r\n              }\r\n\r\n              return tick;\r\n            };\r\n          }\r\n          if (axis.tickFormat) {\r\n            _option['tickFormat'] = axis.tickFormat;\r\n          }\r\n          axisOption.push(new AxisOption(_option));\r\n        });\r\n      });\r\n\r\n      return this.axisOption = axisOption;\r\n    }\r\n    return this.axisOption = [];\r\n  }\r\n\r\n  getKeys() {\r\n    const keys = this.data.map((d: any) => {\r\n      if (Array.isArray(d.key)) {\r\n        return d.key[0];\r\n      }\r\n      return d.key;\r\n    });\r\n    return _.uniq(keys);\r\n  }\r\n\r\n  getLegends() {\r\n    if (!this._legendObj) {\r\n      this.setLegendObj();\r\n    }\r\n    return this._legendObj;\r\n  }\r\n\r\n  setFilters(filters?: any) {\r\n    this.setLegendObj();\r\n  }\r\n\r\n  filterAll() {\r\n    this.chart.filterAll();\r\n  }\r\n\r\n  private setLegendObj() {\r\n    this._legendObj = [];\r\n    this.getKeys().forEach(key => {\r\n      const legend = {\r\n        key: key,\r\n        // @ts-ignore\r\n        name: this.legends[key] || key,\r\n        filter: () => this.chart.filter(key),\r\n        color: () => {\r\n          const defaultColor = this.chart.getColor(key);\r\n          // @ts-ignore\r\n          return this.colors ? this.colors[key] || defaultColor : defaultColor;\r\n        }\r\n      };\r\n      this._legendObj.push(legend);\r\n    });\r\n  }\r\n\r\n  private commaSeparateNumber (value: any) {\r\n    if (!value) {\r\n      return '';\r\n    }\r\n    while (/(\\d+)(\\d{3})/.test(value.toString())) {\r\n      value = value.toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, '$1,');\r\n    }\r\n    return value;\r\n  }\r\n}\r\n","/*\n * Public API Surface of dj-angular-chart\n */\n\nexport * from './lib/dj-angular-chart.service';\nexport * from './lib/dj-angular-chart.component';\nexport * from './lib/dj-angular-chart.module';\nexport * from './lib/class/dj-chart-option'\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["constants","utils","moment","_moment"],"mappings":"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"}